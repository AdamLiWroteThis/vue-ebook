{"version":3,"sources":["webpack:///./src/components/speak/SpeakMask.vue?1969","webpack:///./src/components/speak/SpeakBottom.vue?1456","webpack:///src/components/speak/SpeakBottom.vue","webpack:///./src/components/speak/SpeakBottom.vue?1361","webpack:///./src/components/speak/SpeakBottom.vue","webpack:///./src/views/store/StoreSpeaking.vue?b9f9","webpack:///./src/components/speak/SpeakMask.vue?89c5","webpack:///src/components/speak/SpeakMask.vue","webpack:///./src/components/speak/SpeakMask.vue?1b72","webpack:///./src/components/speak/SpeakMask.vue","webpack:///src/views/store/StoreSpeaking.vue","webpack:///./src/components/speak/SpeakPlaying.vue?cb83","webpack:///./src/components/speak/SpeakPlaying.vue?4709","webpack:///src/components/speak/SpeakPlaying.vue","webpack:///./src/components/speak/SpeakPlaying.vue?4c13","webpack:///./src/components/speak/SpeakPlaying.vue","webpack:///./src/components/speak/SpeakBottom.vue?a5bb","webpack:///./src/views/store/StoreSpeaking.vue?8d49","webpack:///./src/views/store/StoreSpeaking.vue?684a","webpack:///./src/views/store/StoreSpeaking.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","showPlay","on","$event","stopPropagation","preventDefault","onPlayingCardClick","togglePlay","isPlaying","_v","_s","chapter","label","currentSectionIndex","currentSectionTotal","_e","playInfo","currentMinute","currentSecond","totalMinute","totalSecond","$t","staticRenderFns","component","attrs","directives","name","rawName","value","expression","hide","title","ref","domProps","progress","onProgressChange","target","onProgressInput","leftMinute","leftSecond","prev","next","global","ePub","components","DetailTitle","BookInfo","Scroll","SpeakPlaying","Bottom","SpeakWindow","computed","m","s","audioCanPlay","lang","metadata","language","disableScroll","$refs","speakWindow","visible","playingIndex","scrollBottom","flatNavigation","desc","description","substring","navigation","Array","prototype","concat","apply","doFlatNavigation","toc","category","bookItem","author","creator","data","book","rendition","cover","ifShowContent","paragraph","section","audio","currentPlayingTime","totalPlayingTime","playStatus","toastText","isOnline","methods","createVoice","xmlhttp","open","send","xmlDoc","json","path","src","continuePlay","showToast","pausePlay","play","speak","resetPlay","index","$nextTick","spine","get","href","display","then","text","replace","pause","speakPlaying","stopAnimation","onAudioEnded","currentTime","refreshProgress","percent","onTimeUpdate","onCanPlay","duration","findBookFromList","response","status","bookList","length","init","err","blob","opf","fileName","downloadBook","parseBook","loaded","coverUrl","back","$router","go","onScroll","offsetY","showShadow","hideShadow","toggleContent","renderTo","width","window","innerWidth","height","method","content","forEach","item","deep","arr","push","subitems","simpleToast","show","updateText","mounted","_l","key","refInFor","style","_m"],"mappings":"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","file":"js/chunk-f0190fe4.7eaf525d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=style&index=0&id=90471c68&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=style&index=0&id=90471c68&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bottom-wrapper\",class:{'hide-play': !_vm.showPlay}},[(_vm.showPlay)?_c('div',{staticClass:\"bottom-playing-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onPlayingCardClick($event)}}},[_c('div',{staticClass:\"bottom-playing-left\"},[_c('div',{staticClass:\"icon-play-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.togglePlay($event)}}},[(!_vm.isPlaying)?_c('span',{staticClass:\"icon-play_go\"}):_c('span',{staticClass:\"icon-play_pause\"})])]),_c('div',{staticClass:\"bottom-playing-right\"},[_c('div',{staticClass:\"bottom-playing-chapter-text\"},[_c('span',{staticClass:\"chapter-label\"},[_vm._v(_vm._s(_vm.chapter ? _vm.chapter.label : ''))]),(_vm.currentSectionIndex && _vm.currentSectionTotal)?_c('span',{staticClass:\"bottom-playing-page-text\"},[_vm._v(\"( \"+_vm._s(_vm.currentSectionIndex)+\" / \"+_vm._s(_vm.currentSectionTotal)+\" )\")]):_vm._e()]),_c('div',{staticClass:\"bottom-playing-page-text\"},[_vm._v(_vm._s(_vm.playInfo ? _vm.playInfo.currentMinute : '00')+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.currentSecond : '00')+\" / \"+_vm._s(_vm.playInfo ? _vm.playInfo.totalMinute : '00')+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.totalSecond : '00'))])])]):_vm._e(),_c('div',{staticClass:\"bottom-btn-wrapper\"},[_c('span',{staticClass:\"bottom-btn-text\"},[_vm._v(_vm._s(_vm.$t('detail.addOrRemoveShelf')))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bottom-wrapper\" :class=\"{'hide-play': !showPlay}\">\n    <div class=\"bottom-playing-wrapper\" @click.stop.prevent=\"onPlayingCardClick\" v-if=\"showPlay\">\n      <div class=\"bottom-playing-left\">\n        <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n          <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n          <span class=\"icon-play_pause\" v-else></span>\n        </div>\n      </div>\n      <div class=\"bottom-playing-right\">\n        <div class=\"bottom-playing-chapter-text\">\n          <span class=\"chapter-label\">{{chapter ? chapter.label : ''}}</span>\n          <span class=\"bottom-playing-page-text\" v-if=\"currentSectionIndex && currentSectionTotal\">( {{currentSectionIndex}} / {{currentSectionTotal}} )</span>\n        </div>\n        <div class=\"bottom-playing-page-text\">{{playInfo ? playInfo.currentMinute : '00'}}:{{playInfo ? playInfo.currentSecond : '00'}} / {{playInfo ? playInfo.totalMinute : '00'}}:{{playInfo ? playInfo.totalSecond : '00'}}</div>\n      </div>\n    </div>\n    <div class=\"bottom-btn-wrapper\">\n      <span class=\"bottom-btn-text\">{{$t('detail.addOrRemoveShelf')}}</span>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      chapter: Object,\n      currentSectionIndex: Number,\n      currentSectionTotal: Number,\n      showPlay: Boolean,\n      isPlaying: Boolean,\n      playInfo: Object\n    },\n    methods: {\n      togglePlay() {\n        this.$parent.togglePlay()\n      },\n      onPlayingCardClick() {\n        this.$emit('onPlayingCardClick')\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .bottom-wrapper {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    z-index: 110;\n    width: 100%;\n    height: px2rem(116);\n    background: white;\n    box-shadow: 0 px2rem(-2) px2rem(2) 0 rgba(0, 0, 0, .1);\n    &.hide-play {\n      height: px2rem(52);\n    }\n    .bottom-playing-wrapper {\n      display: flex;\n      width: 100%;\n      height: px2rem(64);\n      .bottom-playing-left {\n        flex: 0 0 px2rem(70);\n        width: px2rem(70);\n        @include center;\n        .icon-play-wrapper {\n          flex: 0 0 px2rem(100);\n          @include center;\n          &:active {\n            opacity: .5;\n          }\n          .icon-play_go {\n            font-size: px2rem(40);\n            color: $color-blue;\n          }\n          .icon-play_pause {\n            font-size: px2rem(40);\n            color: $color-blue;\n          }\n        }\n      }\n      .bottom-playing-right {\n        flex: 1;\n        padding-right: px2rem(15);\n        box-sizing: border-box;\n        @include columnLeft;\n        .bottom-playing-chapter-text {\n          max-width: px2rem(305);\n          color: #333;\n          font-size: px2rem(16);\n          line-height: px2rem(19);\n          @include ellipsis;\n        }\n        .bottom-playing-page-text {\n          color: #666;\n          font-size: px2rem(10);\n          margin-top: px2rem(5);\n        }\n      }\n    }\n    .bottom-btn-wrapper {\n      width: 100%;\n      height: px2rem(52);\n      border-top: px2rem(1) solid #eee;\n      box-sizing: border-box;\n      @include center;\n      .bottom-btn-text {\n        font-size: px2rem(14);\n        color: $color-blue;\n        font-weight: bold;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpeakBottom.vue?vue&type=template&id=07a440f0&scoped=true&\"\nimport script from \"./SpeakBottom.vue?vue&type=script&lang=js&\"\nexport * from \"./SpeakBottom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpeakBottom.vue?vue&type=style&index=0&id=07a440f0&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07a440f0\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=style&index=0&id=0032f20a&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=style&index=0&id=0032f20a&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"book-speak-mask-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.hide($event)}}},[_c('transition',{attrs:{\"name\":\"popup-slide-up\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.speakCardVisible),expression:\"speakCardVisible\"}],staticClass:\"book-speak-mask-card-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.hide($event)}}},[_c('div',{staticClass:\"pulldown-icon-wrapper\",on:{\"click\":_vm.hide}},[_c('span',{staticClass:\"icon-pull_down\"})]),_c('div',{staticClass:\"card-title-wrapper\"},[_c('div',{staticClass:\"icon-speak-wrapper\"},[_c('span',{staticClass:\"icon-speak\"})]),_c('div',{staticClass:\"speak-title-wrapper\"},[_c('span',{staticClass:\"speak-title\"},[_vm._v(_vm._s(_vm.$t('speak.voice')))])]),_c('div',{staticClass:\"read-fulltext-wrapper\"},[_c('span',{staticClass:\"read-fulltext\"},[_vm._v(_vm._s(_vm.$t('speak.read')))])])]),_c('div',{staticClass:\"card-section-title-wrapper\"},[_c('div',{staticClass:\"card-section-title-text\"},[_vm._v(_vm._s(_vm.title))]),(_vm.currentSectionIndex)?_c('div',{staticClass:\"card-section-sub-title-text\"},[_vm._v(_vm._s(_vm.currentSectionIndex)+\" / \"+_vm._s(_vm.currentSectionTotal)+\" \")]):_vm._e()]),_c('div',{staticClass:\"setting-progress\"},[_c('div',{staticClass:\"progress-wrapper\"},[_c('input',{ref:\"progress\",staticClass:\"progress\",attrs:{\"type\":\"range\",\"max\":\"100\",\"min\":\"0\",\"step\":\"1\"},domProps:{\"value\":_vm.progress},on:{\"change\":function($event){return _vm.onProgressChange($event.target.value)},\"input\":function($event){return _vm.onProgressInput($event.target.value)}}})]),_c('div',{staticClass:\"progress-text\"},[_c('div',{staticClass:\"progress-text-current\"},[_vm._v(_vm._s(_vm.playInfo ? _vm.playInfo.currentMinute : '00')+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.currentSecond : '00')+\" \")]),_c('div',{staticClass:\"progress-text-left\"},[_vm._v(\"-\"+_vm._s(_vm.playInfo ? _vm.playInfo.leftMinute : '00')+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.leftSecond : '00')+\" \")])])]),_c('div',{staticClass:\"playing-wrapper\"},[_c('div',{staticClass:\"icon-settings-wrapper\"},[_c('span',{staticClass:\"icon-settings\"}),_c('div',{staticClass:\"settings-text\"},[_vm._v(_vm._s(_vm.$t('speak.settings')))])]),_c('span',{staticClass:\"icon-play_backward\",class:{'not-use': _vm.currentSectionIndex <= 1},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.prev($event)}}}),_c('div',{staticClass:\"icon-play-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.togglePlay($event)}}},[(!_vm.isPlaying)?_c('span',{staticClass:\"icon-play_go\"}):_c('span',{staticClass:\"icon-play_pause\"})]),_c('span',{staticClass:\"icon-play_forward\",class:{'not-use': _vm.currentSectionIndex >= _vm.currentSectionTotal},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.next($event)}}}),_c('div',{staticClass:\"icon-clock-wrapper\"},[_c('span',{staticClass:\"icon-clock\"}),_c('div',{staticClass:\"clock-text\"},[_vm._v(_vm._s(_vm.$t('speak.timing')))])])]),_c('div',{staticClass:\"read-apply-wrapper\"},[_vm._v(\" \"+_vm._s(_vm.$t('speak.apply'))+\" \")]),_c('div',{staticClass:\"read-title-wrapper\"},[_c('span',{staticClass:\"line\"}),_c('div',{staticClass:\"read-title-text\"},[_vm._v(_vm._s(_vm.$t('speak.current')))]),_c('span',{staticClass:\"line\"})]),_c('div',{ref:\"bookWrapper\",staticClass:\"book-wrapper\"},[_c('div',{attrs:{\"id\":\"book-read\"}})])])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"fade\">\n    <div class=\"book-speak-mask-wrapper\" @click.stop.prevent=\"hide\" v-show=\"visible\">\n      <transition name=\"popup-slide-up\">\n        <div class=\"book-speak-mask-card-wrapper\" v-show=\"speakCardVisible\" @click.stop.prevent=\"hide\">\n          <div class=\"pulldown-icon-wrapper\" @click=\"hide\">\n            <span class=\"icon-pull_down\"></span>\n          </div>\n          <div class=\"card-title-wrapper\">\n            <div class=\"icon-speak-wrapper\">\n              <span class=\"icon-speak\"></span>\n            </div>\n            <div class=\"speak-title-wrapper\">\n              <span class=\"speak-title\">{{$t('speak.voice')}}</span>\n            </div>\n            <div class=\"read-fulltext-wrapper\">\n              <span class=\"read-fulltext\">{{$t('speak.read')}}</span>\n            </div>\n          </div>\n          <div class=\"card-section-title-wrapper\">\n            <div class=\"card-section-title-text\">{{title}}</div>\n            <div class=\"card-section-sub-title-text\" v-if=\"currentSectionIndex\">{{currentSectionIndex}} /\n              {{currentSectionTotal}}\n            </div>\n          </div>\n          <div class=\"setting-progress\">\n            <div class=\"progress-wrapper\">\n              <input class=\"progress\" type=\"range\"\n                     max=\"100\"\n                     min=\"0\"\n                     step=\"1\"\n                     @change=\"onProgressChange($event.target.value)\"\n                     @input=\"onProgressInput($event.target.value)\"\n                     :value=\"progress\"\n                     ref=\"progress\">\n            </div>\n            <div class=\"progress-text\">\n              <div class=\"progress-text-current\">{{playInfo ? playInfo.currentMinute : '00'}}:{{playInfo ?\n                playInfo.currentSecond : '00'}}\n              </div>\n              <div class=\"progress-text-left\">-{{playInfo ? playInfo.leftMinute : '00'}}:{{playInfo ?\n                playInfo.leftSecond : '00'}}\n              </div>\n            </div>\n          </div>\n          <div class=\"playing-wrapper\">\n            <div class=\"icon-settings-wrapper\">\n              <span class=\"icon-settings\"></span>\n              <div class=\"settings-text\">{{$t('speak.settings')}}</div>\n            </div>\n            <span class=\"icon-play_backward\" :class=\"{'not-use': currentSectionIndex <= 1}\" @click.stop.prevent=\"prev\"></span>\n            <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n              <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n              <span class=\"icon-play_pause\" v-else></span>\n            </div>\n            <span class=\"icon-play_forward\" :class=\"{'not-use': currentSectionIndex >= currentSectionTotal}\"\n                  @click.stop.prevent=\"next\"></span>\n            <div class=\"icon-clock-wrapper\">\n              <span class=\"icon-clock\"></span>\n              <div class=\"clock-text\">{{$t('speak.timing')}}</div>\n            </div>\n          </div>\n          <div class=\"read-apply-wrapper\">\n            {{$t('speak.apply')}}\n          </div>\n          <div class=\"read-title-wrapper\">\n            <span class=\"line\"></span>\n            <div class=\"read-title-text\">{{$t('speak.current')}}</div>\n            <span class=\"line\"></span>\n          </div>\n          <div class=\"book-wrapper\" ref=\"bookWrapper\">\n            <div id=\"book-read\"></div>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </transition>\n</template>\n\n<script>\n  import { realPx } from '@/utils/utils'\n\n  export default {\n    props: {\n      title: String,\n      book: Object,\n      section: Object,\n      currentSectionIndex: Number,\n      currentSectionTotal: Number,\n      isPlaying: Boolean,\n      playInfo: Object\n    },\n    data() {\n      return {\n        visible: false,\n        speakCardVisible: false,\n        progress: 0,\n        readHeight: 0\n      }\n    },\n    methods: {\n      refreshProgress(p) {\n        this.progress = p\n        this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`\n      },\n      updateText(promise) {\n        promise.then(() => {\n          const currentPage = this.rendition.currentLocation()\n          const cfibase = this.section.cfiBase\n          const cfistart = currentPage.start.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          const cfiend = currentPage.end.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          this.book.getRange(`epubcfi(${cfibase}!,${cfistart},${cfiend})`).then(range => {\n            let text = range.toString()\n            text = text.replace(/\\s(2,)/g, '')\n            text = text.replace(/\\r/g, '')\n            text = text.replace(/\\n/g, '')\n            text = text.replace(/\\t/g, '')\n            text = text.replace(/\\f/g, '')\n            this.$emit('updateText', text)\n          })\n        })\n      },\n      togglePlay() {\n        this.$parent.togglePlay()\n      },\n      prev() {\n        if (this.currentSectionIndex > 1) {\n          this.updateText(this.rendition.prev())\n          this.$emit('update:currentSectionIndex', this.currentSectionIndex - 1)\n          this.$parent.resetPlay()\n          setTimeout(() => {\n            this.$parent.togglePlay()\n          }, 500)\n        }\n      },\n      next() {\n        if (this.currentSectionIndex < this.currentSectionTotal) {\n          this.updateText(this.rendition.next())\n          this.$emit('update:currentSectionIndex', this.currentSectionIndex + 1)\n          this.$parent.resetPlay()\n          setTimeout(() => {\n            this.$parent.togglePlay()\n          }, 500)\n        }\n      },\n      display() {\n        if (!this.rendition) {\n          this.rendition = this.book.renderTo('book-read', {\n            width: window.innerWidth > 640 ? 640 : window.innerWidth,\n            height: this.readHeight,\n            method: 'default'\n          })\n          this.displayed = this.rendition.display(this.section.href)\n        } else {\n          this.displayed = this.rendition.display(this.section.href)\n        }\n      },\n      onProgressChange(progress) {\n      },\n      onProgressInput(progress) {\n        this.progress = progress\n        this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`\n      },\n      hide() {\n        this.speakCardVisible = false\n        this.visible = false\n      },\n      show() {\n        this.visible = true\n        this.speakCardVisible = true\n        this.refresh()\n        this.$nextTick(() => {\n          this.display()\n        })\n      },\n      refresh() {\n        this.readHeight = window.innerHeight * 0.9 - realPx(40) - realPx(54) - realPx(46) - realPx(48) - realPx(60) - realPx(44)\n        // console.log(this.readHeight)\n        this.$refs.bookWrapper.style.height = this.readHeight + 'px'\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .book-speak-mask-wrapper {\n    position: fixed;\n    left: 0;\n    top: 0;\n    z-index: 120;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, .5);\n    .book-speak-mask-card-wrapper {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      z-index: 120;\n      width: 100%;\n      height: 90%;\n      background: white;\n      border-radius: px2rem(10) px2rem(10) 0 0;\n      .pulldown-icon-wrapper {\n        width: 100%;\n        height: px2rem(40);\n        color: #ccc;\n        font-size: px2rem(40);\n        @include center;\n      }\n      .card-title-wrapper {\n        width: 100%;\n        height: px2rem(54);\n        display: flex;\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        .icon-speak-wrapper {\n          flex: 0 0 px2rem(40);\n          @include left;\n          .icon-speak {\n            font-size: px2rem(24);\n            color: #999;\n          }\n        }\n        .speak-title-wrapper {\n          flex: 1;\n          @include left;\n          .speak-title {\n            font-size: px2rem(16);\n            font-weight: bold;\n            color: #666;\n          }\n        }\n        .read-fulltext-wrapper {\n          flex: 1;\n          @include right;\n          .read-fulltext {\n            font-size: px2rem(12);\n            font-weight: bold;\n            color: $color-blue;\n            background: rgba(74, 171, 255, .2);\n            padding: px2rem(5) px2rem(10);\n            box-sizing: border-box;\n            border-radius: px2rem(20);\n          }\n        }\n      }\n      .card-section-title-wrapper {\n        width: 100%;\n        height: px2rem(46);\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        @include columnCenter;\n        .card-section-title-text {\n          font-size: px2rem(16);\n          color: #333;\n          font-weight: bold;\n        }\n        .card-section-sub-title-text {\n          font-size: px2rem(12);\n          color: #666;\n          margin-top: px2rem(5);\n        }\n      }\n      .setting-progress {\n        width: 100%;\n        height: px2rem(48);\n        @include columnTop;\n        .progress-wrapper {\n          flex: 1;\n          width: 100%;\n          @include center;\n          padding: 0 px2rem(30);\n          box-sizing: border-box;\n          .progress {\n            width: 100%;\n            -webkit-appearance: none;\n            height: px2rem(2);\n            background: -webkit-linear-gradient($color-blue, $color-blue) no-repeat, rgba(74, 171, 255, .2);\n            background-size: 0 100%;\n            &:focus {\n              outline: none;\n            }\n            &::-webkit-slider-thumb {\n              -webkit-appearance: none;\n              height: px2rem(20);\n              width: px2rem(20);\n              border-radius: 50%;\n              background: $color-blue;\n              border: none;\n              box-shadow: 0 4px 4px 0 rgba(0, 0, 0, .15);\n            }\n          }\n        }\n        .progress-text {\n          display: flex;\n          width: 100%;\n          padding: 0 px2rem(30);\n          box-sizing: border-box;\n          .progress-text-current {\n            flex: 1;\n            text-align: left;\n            font-size: px2rem(10);\n            color: #666;\n          }\n          .progress-text-left {\n            flex: 1;\n            text-align: right;\n            font-size: px2rem(10);\n            color: #666;\n          }\n        }\n      }\n      .playing-wrapper {\n        width: 100%;\n        height: px2rem(60);\n        @include center;\n        .icon-settings-wrapper {\n          flex: 1;\n          @include columnCenter;\n          .icon-settings {\n            font-size: px2rem(18);\n            color: #666;\n          }\n          .settings-text {\n            margin-top: px2rem(5);\n            font-size: px2rem(10);\n            color: #666;\n          }\n        }\n        .icon-play_backward {\n          font-size: px2rem(30);\n          color: $color-blue;\n          &:active {\n            opacity: .5;\n          }\n          &.not-use {\n            color: $color-blue-transparent;\n          }\n        }\n        .icon-play-wrapper {\n          flex: 0 0 px2rem(100);\n          @include center;\n          &:active {\n            opacity: .5;\n          }\n          .icon-play_go {\n            font-size: px2rem(50);\n            color: $color-blue;\n          }\n          .icon-play_pause {\n            font-size: px2rem(50);\n            color: $color-blue;\n          }\n        }\n        .icon-play_forward {\n          font-size: px2rem(30);\n          color: $color-blue;\n          &:active {\n            opacity: .5;\n          }\n          &.not-use {\n            color: $color-blue-transparent;\n          }\n        }\n        .icon-clock-wrapper {\n          flex: 1;\n          @include columnCenter;\n          .icon-clock2 {\n            font-size: px2rem(18);\n            color: #666;\n          }\n          .clock-text {\n            margin-top: px2rem(5);\n            font-size: px2rem(10);\n            color: #666;\n          }\n        }\n      }\n      .read-apply-wrapper {\n        width: 100%;\n        height: px2rem(20);\n        font-size: px2rem(10);\n        color: $color-green;\n        @include center;\n      }\n      .read-title-wrapper {\n        width: 100%;\n        height: px2rem(24);\n        box-sizing: border-box;\n        @include center;\n        .line {\n          flex: 1;\n          border-top: px2rem(1) solid #eee;\n          height: 0;\n        }\n        .read-title-text {\n          flex: 0 0 px2rem(130);\n          font-size: px2rem(14);\n          color: #666;\n          text-align: center;\n        }\n      }\n      .book-wrapper {\n        #read {\n          width: 100%;\n          height: 100%;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpeakMask.vue?vue&type=template&id=90471c68&scoped=true&\"\nimport script from \"./SpeakMask.vue?vue&type=script&lang=js&\"\nexport * from \"./SpeakMask.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpeakMask.vue?vue&type=style&index=0&id=90471c68&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"90471c68\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"book-speaking\">\n    <detail-title @back=\"back\" ref=\"title\"></detail-title>\n    <scroll class=\"content-wrapper\"\n            :top=\"42\"\n            :bottom=\"scrollBottom\"\n            :ifNoScroll=\"disableScroll\"\n            @onScroll=\"onScroll\"\n            ref=\"scroll\">\n      <book-info :cover=\"cover\"\n                 :title=\"title\"\n                 :author=\"author\"\n                 :desc=\"desc\"></book-info>\n      <div class=\"book-speak-title-wrapper\">\n        <div class=\"icon-speak-wrapper\">\n          <span class=\"icon-speak\"></span>\n        </div>\n        <div class=\"speak-title-wrapper\">\n          <span class=\"speak-title\">{{$t('speak.voice')}}</span>\n        </div>\n        <div class=\"icon-down-wrapper\" @click=\"toggleContent\">\n          <span :class=\"{'icon-down2': !ifShowContent, 'icon-up': ifShowContent}\"></span>\n        </div>\n      </div>\n      <div class=\"book-detail-content-wrapper\" v-show=\"ifShowContent\">\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"loading-text-wrapper\" v-if=\"!this.navigation\">\n            <span class=\"loading-text\">{{$t('detail.loading')}}</span>\n          </div>\n          <div class=\"book-detail-content-item-wrapper\">\n            <div class=\"book-detail-content-item\" v-for=\"(item, index) in flatNavigation\" :key=\"index\"\n                 @click=\"speak(item, index)\">\n              <speak-playing v-if=\"playingIndex === index\"\n                             :number=\"5\"\n                             ref=\"speakPlaying\"></speak-playing>\n              <div class=\"book-detail-content-navigation-text\" :class=\"{'is-playing': playingIndex === index}\"\n                   v-if=\"item.label\">{{item.label}}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <audio @canplay=\"onCanPlay\"\n             @timeupdate=\"onTimeUpdate\"\n             @ended=\"onAudioEnded\"\n             ref=\"audio\"></audio>\n    </scroll>\n    <bottom :chapter=\"chapter\"\n            :currentSectionIndex=\"currentSectionIndex\"\n            :currentSectionTotal=\"currentSectionTotal\"\n            :showPlay=\"showPlay\"\n            :isPlaying.sync=\"isPlaying\"\n            :playInfo=\"playInfo\"\n            @onPlayingCardClick=\"onPlayingCardClick\"></bottom>\n    <div class=\"book-wrapper\">\n      <div id=\"read\"></div>\n    </div>\n    <speak-window :title=\"this.chapter ? this.chapter.label : ''\"\n                  :book=\"book\"\n                  :section=\"section\"\n                  :currentSectionIndex.sync=\"currentSectionIndex\"\n                  :currentSectionTotal=\"currentSectionTotal\"\n                  :isPlaying.sync=\"isPlaying\"\n                  :playInfo=\"playInfo\"\n                  @updateText=\"updateText\"\n                  ref=\"speakWindow\"></speak-window>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport DetailTitle from '../../components/detail/DetaiTitle'\nimport BookInfo from '../../components/detail/BookInfo'\nimport Scroll from '../../components/common/Scroll'\nimport SpeakPlaying from '../../components/speak/SpeakPlaying'\nimport Bottom from '../../components/speak/SpeakBottom'\nimport SpeakWindow from '../../components/speak/SpeakMask'\nimport {findBook, getCategoryName} from '../../utils/store'\nimport {download, flatList} from '../../api/store'\nimport {getLocalForage} from '../../utils/localForage'\nimport {realPx} from '../../utils/utils'\nimport Epub from 'epubjs'\n\nglobal.ePub = Epub\n\nexport default {\n  components: {\n    DetailTitle,\n    BookInfo,\n    Scroll,\n    SpeakPlaying,\n    Bottom,\n    SpeakWindow\n  },\n  computed: {\n    currentMinute() {\n      const m = Math.floor(this.currentPlayingTime / 60)\n      return m < 10 ? '0' + m : m\n    },\n    currentSecond() {\n      const s = Math.floor(this.currentPlayingTime - parseInt(this.currentMinute) * 60)\n      return s < 10 ? '0' + s : s\n    },\n    totalMinute() {\n      const m = Math.floor(this.totalPlayingTime / 60)\n      return m < 10 ? '0' + m : m\n    },\n    totalSecond() {\n      const s = Math.floor(this.totalPlayingTime - parseInt(this.totalMinute) * 60)\n      return s < 10 ? '0' + s : s\n    },\n    leftMinute() {\n      const m = Math.floor((this.totalPlayingTime - this.currentPlayingTime) / 60)\n      return m < 10 ? '0' + m : m\n    },\n    leftSecond() {\n      const s = Math.floor((this.totalPlayingTime - this.currentPlayingTime) - parseInt(this.leftMinute) * 60)\n      return s < 10 ? '0' + s : s\n    },\n    playInfo() {\n      if (this.audioCanPlay) {\n        return {\n          currentMinute: this.currentMinute,\n          currentSecond: this.currentSecond,\n          totalMinute: this.totalMinute,\n          totalSecond: this.totalSecond,\n          leftMinute: this.leftMinute,\n          leftSecond: this.leftSecond\n        }\n      } else {\n        return null\n      }\n    },\n    lang() {\n      return this.metadata ? this.metadata.language : ''\n    },\n    disableScroll() {\n      if (this.$refs.speakWindow) {\n        return this.$refs.speakWindow.visible\n      } else {\n        return false\n      }\n    },\n    showPlay() {\n      return this.playingIndex >= 0\n    },\n    scrollBottom() {\n      return this.showPlay ? 116 : 52\n    },\n    chapter() {\n      return this.flatNavigation[this.playingIndex]\n    },\n    desc() {\n      if (this.description) {\n        return this.description.substring(0, 100)\n      } else {\n        return ''\n      }\n    },\n    flatNavigation() {\n      if (this.navigation) {\n        return Array.prototype.concat.apply([], Array.prototype.concat.apply([], this.doFlatNavigation(this.navigation.toc)))\n      } else {\n        return []\n      }\n    },\n    category() {\n      return this.bookItem ? getCategoryName(this.bookItem.category) : ''\n    },\n    title() {\n      return this.metadata ? this.metadata.title : ''\n    },\n    author() {\n      return this.metadata ? this.metadata.creator : ''\n    }\n  },\n  data() {\n    return {\n      bookItem: null,\n      book: null,\n      rendition: null,\n      metadata: null,\n      cover: null,\n      navigation: null,\n      description: null,\n      ifShowContent: true,\n      playingIndex: -1,\n      paragraph: null,\n      currentSectionIndex: null,\n      currentSectionTotal: null,\n      section: null,\n      isPlaying: false,\n      audio: null,\n      audioCanPlay: false,\n      currentPlayingTime: 0,\n      totalPlayingTime: 0,\n      playStatus: 0, // 0 - 未播放，1 - 播放中，2 - 暂停中\n      toastText: '',\n      isOnline: false\n    }\n  },\n  methods: {\n    createVoice(text) {\n      const xmlhttp = new XMLHttpRequest()\n      xmlhttp.open('GET', `${process.env.VUE_APP_VOICE_URL}/voice?text=${text}&lang=${this.lang.toLowerCase()}`, false)\n      xmlhttp.send()\n      const xmlDoc = xmlhttp.responseText\n      if (xmlDoc) {\n        const json = JSON.parse(xmlDoc)\n        if (json.path) {\n          this.$refs.audio.src = json.path\n          this.continuePlay()\n        } else {\n          this.showToast('播放失败，未生成链接')\n        }\n      } else {\n        this.showToast('播放失败')\n      }\n      /*\n      axios.create({\n        baseURL: process.env.VUE_APP_VOICE_URL + '/voice'\n      })({\n        method: 'get',\n        params: {\n          text: text,\n          lang: this.lang.toLowerCase()\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          if (response.data.error === 0) {\n            const downloadUrl = response.data.path\n            console.log('开始下载...%s', downloadUrl)\n            downloadMp3(downloadUrl, blob => {\n              const url = window.URL.createObjectURL(blob)\n              console.log(blob, url)\n              this.$refs.audio.src = url\n              this.continuePlay()\n            })\n          } else {\n            this.showToast(response.data.msg)\n          }\n        } else {\n          this.showToast('请求失败')\n        }\n      }).catch(err => {\n        console.log(err)\n        this.showToast('播放失败')\n      })\n      */\n    },\n    togglePlay() {\n      if (!this.isPlaying) {\n        if (this.playStatus === 0) {\n          this.play()\n        } else if (this.playStatus === 2) {\n          this.continuePlay()\n        }\n      } else {\n        this.pausePlay()\n      }\n    },\n    speak(item, index) {\n      this.resetPlay()\n      this.playingIndex = index\n      this.$nextTick(() => {\n        this.$refs.scroll.refresh()\n      })\n      if (this.chapter) {\n        this.section = this.book.spine.get(this.chapter.href)\n        this.rendition.display(this.section.href).then(section => {\n          const currentPage = this.rendition.currentLocation()\n          const cfibase = section.cfiBase\n          const cfistart = currentPage.start.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          const cfiend = currentPage.end.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          this.currentSectionIndex = currentPage.start.displayed.page\n          this.currentSectionTotal = currentPage.start.displayed.total\n          const cfi = `epubcfi(${cfibase}!,${cfistart},${cfiend})`\n          // console.log(currentPage, cfi, cfibase, cfistart, cfiend)\n          this.book.getRange(cfi).then(range => {\n            let text = range.toLocaleString()\n            text = text.replace(/\\s(2,)/g, '')\n            text = text.replace(/\\r/g, '')\n            text = text.replace(/\\n/g, '')\n            text = text.replace(/\\t/g, '')\n            text = text.replace(/\\f/g, '')\n            this.updateText(text)\n          })\n        })\n      }\n    },\n    resetPlay() {\n      if (this.playStatus === 1) {\n        this.pausePlay()\n      }\n      this.isPlaying = false\n      this.playStatus = 0\n    },\n    play() {\n      this.createVoice(this.paragraph)\n    },\n    continuePlay() {\n      this.$refs.audio.play().then(() => {\n        this.$refs.speakPlaying[0].startAnimation()\n        this.isPlaying = true\n        this.playStatus = 1\n      })\n    },\n    pausePlay() {\n      this.$refs.audio.pause()\n      this.$refs.speakPlaying[0].stopAnimation()\n      this.isPlaying = false\n      this.playStatus = 2\n    },\n    onAudioEnded() {\n      this.resetPlay()\n      this.currentPlayingTime = this.$refs.audio.currentTime\n      const percent = Math.floor((this.currentPlayingTime / this.totalPlayingTime) * 100)\n      this.$refs.speakWindow.refreshProgress(percent)\n    },\n    onTimeUpdate() {\n      this.currentPlayingTime = this.$refs.audio.currentTime\n      const percent = Math.floor((this.currentPlayingTime / this.totalPlayingTime) * 100)\n      this.$refs.speakWindow.refreshProgress(percent)\n    },\n    onCanPlay() {\n      this.audioCanPlay = true\n      this.currentPlayingTime = this.$refs.audio.currentTime\n      this.totalPlayingTime = this.$refs.audio.duration\n    },\n    findBookFromList(fileName) {\n      flatList().then(response => {\n        if (response.status === 200) {\n          const bookList = response.data.data.filter(item => item.fileName === fileName)\n          if (bookList && bookList.length > 0) {\n            this.bookItem = bookList[0]\n            this.init()\n          }\n        }\n      })\n    },\n    init() {\n      const fileName = this.$route.query.fileName\n      if (!this.bookItem) {\n        this.bookItem = findBook(fileName)\n      }\n      if (this.bookItem) {\n        getLocalForage(fileName, (err, blob) => {\n          if (err || !blob) {\n            // this.downloadBook(fileName)\n            this.isOnline = true\n            const opf = this.$route.query.opf\n            if (opf) {\n              this.parseBook(opf)\n            }\n          } else {\n            this.isOnline = false\n            this.parseBook(blob)\n          }\n        })\n      } else {\n        this.findBookFromList(fileName)\n      }\n    },\n    downloadBook(fileName) {\n      download(\n        this.bookItem,\n        () => {\n          getLocalForage(fileName, (err, blob) => {\n            if (err) {\n              return\n            }\n            this.parseBook(blob)\n          })\n        })\n    },\n    parseBook(blob) {\n      this.book = new Epub(blob)\n      this.book.loaded.metadata.then(metadata => {\n        this.metadata = metadata\n      })\n      if (this.isOnline) {\n        this.book.coverUrl().then(url => {\n          this.cover = url\n        })\n      } else {\n        this.book.loaded.cover.then(cover => {\n          this.book.archive.createUrl(cover).then(url => {\n            this.cover = url\n          })\n        })\n      }\n      this.book.loaded.navigation.then(nav => {\n        this.navigation = nav\n      })\n      this.display()\n    },\n    back() {\n      this.$router.go(-1)\n    },\n    onScroll(offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow()\n      } else {\n        this.$refs.title.hideShadow()\n      }\n    },\n    toggleContent() {\n      this.ifShowContent = !this.ifShowContent\n    },\n    display() {\n      const height = window.innerHeight * 0.9 - realPx(40) - realPx(54) - realPx(46) - realPx(48) - realPx(60) - realPx(44)\n      this.rendition = this.book.renderTo('read', {\n        width: window.innerWidth,\n        height: height,\n        method: 'default'\n      })\n      this.rendition.display()\n    },\n    doFlatNavigation(content, deep = 1) {\n      const arr = []\n      content.forEach(item => {\n        item.deep = deep\n        arr.push(item)\n        if (item.subitems && item.subitems.length > 0) {\n          arr.push(this.doFlatNavigation(item.subitems, deep + 1))\n        }\n      })\n      return arr\n    },\n    showToast(text) {\n      this.simpleToast(text)\n    },\n    onPlayingCardClick() {\n      this.$refs.speakWindow.show()\n    },\n    updateText(text) {\n      this.paragraph = text\n    }\n  },\n  mounted() {\n    this.init()\n  }\n}\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"../../assets/styles/global\";\n\n.book-speaking {\n  font-size: px2rem(16);\n  width: 100%;\n  background: white;\n\n  .content-wrapper {\n    width: 100%;\n\n    .book-speak-title-wrapper {\n      display: flex;\n      padding: px2rem(15);\n      box-sizing: border-box;\n      border-bottom: px2rem(1) solid #eee;\n\n      .icon-speak-wrapper {\n        flex: 0 0 px2rem(40);\n        @include left;\n\n        .icon-speak {\n          font-size: px2rem(24);\n          color: #999;\n        }\n      }\n\n      .speak-title-wrapper {\n        flex: 1;\n        @include left;\n\n        .speak-title {\n          font-size: px2rem(16);\n          font-weight: bold;\n          color: #666;\n        }\n      }\n\n      .icon-down-wrapper {\n        flex: 0 0 px2rem(40);\n        @include right;\n\n        .icon-up {\n          font-size: px2rem(12);\n          color: #999;\n        }\n\n        .icon-down2 {\n          font-size: px2rem(12);\n          color: #999;\n        }\n      }\n    }\n\n    .book-detail-content-wrapper {\n      width: 100%;\n      border-bottom: px2rem(1) solid #eee;\n      box-sizing: border-box;\n\n      .book-detail-content-list-wrapper {\n        padding: px2rem(10) px2rem(15);\n\n        .loading-text-wrapper {\n          width: 100%;\n\n          .loading-text {\n            font-size: px2rem(14);\n            color: #999;\n          }\n        }\n\n        .book-detail-content-item-wrapper {\n          .book-detail-content-item {\n            display: flex;\n            padding: px2rem(15) 0;\n            font-size: px2rem(14);\n            line-height: px2rem(16);\n            color: #333;\n            border-bottom: px2rem(1) solid #eee;\n\n            &:last-child {\n              border-bottom: none;\n            }\n\n            .book-detail-content-navigation-text {\n              flex: 1;\n              width: 100%;\n              @include ellipsis;\n\n              &.is-playing {\n                color: $color-blue;\n                font-weight: bold;\n                margin-left: px2rem(10);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .book-wrapper {\n    position: absolute;\n    bottom: -100%;\n    z-index: 100;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=style&index=0&id=0f3d8204&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=style&index=0&id=0f3d8204&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playing-item-wrapper\"},_vm._l((_vm.styles),function(item,index){return _c('div',{key:index,ref:\"playingItem\",refInFor:true,staticClass:\"playing-item\",style:(item)})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"playing-item-wrapper\">\n    <div class=\"playing-item\" :style=\"item\" v-for=\"(item, index) in styles\" :key=\"index\" ref=\"playingItem\"></div>\n  </div>\n</template>\n\n<script>\n  import { px2rem } from '@/utils/utils'\n\n  export default {\n    props: {\n      number: Number\n    },\n    computed: {\n      styles() {\n        const styles = new Array(this.number)\n        for (let i = 0; i < styles.length; i++) {\n          styles[i] = {\n            height: px2rem(this.random()) + 'rem'\n          }\n        }\n        return styles\n      }\n    },\n    methods: {\n      startAnimation() {\n        this.task = setInterval(() => {\n          this.$refs.playingItem.forEach(item => {\n            item.style.height = px2rem(this.random()) + 'rem'\n          })\n        }, 200)\n      },\n      stopAnimation() {\n        if (this.task) {\n          clearInterval(this.task)\n        }\n      },\n      random() {\n        return Math.ceil(Math.random() * 10)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .playing-item-wrapper {\n    @include center;\n    .playing-item {\n      flex: 0 0 px2rem(2);\n      width: px2rem(2);\n      height: px2rem(1);\n      background: $color-blue;\n      margin-left: px2rem(2);\n      transition: all .2s ease-in-out;\n      &:first-child {\n        margin: 0;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpeakPlaying.vue?vue&type=template&id=0f3d8204&scoped=true&\"\nimport script from \"./SpeakPlaying.vue?vue&type=script&lang=js&\"\nexport * from \"./SpeakPlaying.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpeakPlaying.vue?vue&type=style&index=0&id=0f3d8204&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f3d8204\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=style&index=0&id=07a440f0&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=style&index=0&id=07a440f0&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-speaking\"},[_c('detail-title',{ref:\"title\",on:{\"back\":_vm.back}}),_c('scroll',{ref:\"scroll\",staticClass:\"content-wrapper\",attrs:{\"top\":42,\"bottom\":_vm.scrollBottom,\"ifNoScroll\":_vm.disableScroll},on:{\"onScroll\":_vm.onScroll}},[_c('book-info',{attrs:{\"cover\":_vm.cover,\"title\":_vm.title,\"author\":_vm.author,\"desc\":_vm.desc}}),_c('div',{staticClass:\"book-speak-title-wrapper\"},[_c('div',{staticClass:\"icon-speak-wrapper\"},[_c('span',{staticClass:\"icon-speak\"})]),_c('div',{staticClass:\"speak-title-wrapper\"},[_c('span',{staticClass:\"speak-title\"},[_vm._v(_vm._s(_vm.$t('speak.voice')))])]),_c('div',{staticClass:\"icon-down-wrapper\",on:{\"click\":_vm.toggleContent}},[_c('span',{class:{'icon-down2': !_vm.ifShowContent, 'icon-up': _vm.ifShowContent}})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowContent),expression:\"ifShowContent\"}],staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[(!this.navigation)?_c('div',{staticClass:\"loading-text-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.$t('detail.loading')))])]):_vm._e(),_c('div',{staticClass:\"book-detail-content-item-wrapper\"},_vm._l((_vm.flatNavigation),function(item,index){return _c('div',{key:index,staticClass:\"book-detail-content-item\",on:{\"click\":function($event){return _vm.speak(item, index)}}},[(_vm.playingIndex === index)?_c('speak-playing',{ref:\"speakPlaying\",refInFor:true,attrs:{\"number\":5}}):_vm._e(),(item.label)?_c('div',{staticClass:\"book-detail-content-navigation-text\",class:{'is-playing': _vm.playingIndex === index}},[_vm._v(_vm._s(item.label)+\" \")]):_vm._e()],1)}),0)])]),_c('audio',{ref:\"audio\",on:{\"canplay\":_vm.onCanPlay,\"timeupdate\":_vm.onTimeUpdate,\"ended\":_vm.onAudioEnded}})],1),_c('bottom',{attrs:{\"chapter\":_vm.chapter,\"currentSectionIndex\":_vm.currentSectionIndex,\"currentSectionTotal\":_vm.currentSectionTotal,\"showPlay\":_vm.showPlay,\"isPlaying\":_vm.isPlaying,\"playInfo\":_vm.playInfo},on:{\"update:isPlaying\":function($event){_vm.isPlaying=$event},\"update:is-playing\":function($event){_vm.isPlaying=$event},\"onPlayingCardClick\":_vm.onPlayingCardClick}}),_vm._m(0),_c('speak-window',{ref:\"speakWindow\",attrs:{\"title\":this.chapter ? this.chapter.label : '',\"book\":_vm.book,\"section\":_vm.section,\"currentSectionIndex\":_vm.currentSectionIndex,\"currentSectionTotal\":_vm.currentSectionTotal,\"isPlaying\":_vm.isPlaying,\"playInfo\":_vm.playInfo},on:{\"update:currentSectionIndex\":function($event){_vm.currentSectionIndex=$event},\"update:current-section-index\":function($event){_vm.currentSectionIndex=$event},\"update:isPlaying\":function($event){_vm.isPlaying=$event},\"update:is-playing\":function($event){_vm.isPlaying=$event},\"updateText\":_vm.updateText}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-wrapper\"},[_c('div',{attrs:{\"id\":\"read\"}})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoreSpeaking.vue?vue&type=template&id=0032f20a&scoped=true&\"\nimport script from \"./StoreSpeaking.vue?vue&type=script&lang=js&\"\nexport * from \"./StoreSpeaking.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoreSpeaking.vue?vue&type=style&index=0&id=0032f20a&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0032f20a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}