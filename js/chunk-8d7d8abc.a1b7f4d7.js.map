{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///src/components/ebook/EbookReader.vue","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./src/components/ebook/EbookReader.vue?4824","webpack:///./src/components/ebook/EbookReader.vue?c4c8","webpack:///./src/components/ebook/EbookReader.vue","webpack:///./src/components/ebook/EbookReader.vue?1743","webpack:///./node_modules/core-js/modules/es.array.join.js"],"names":["fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","callRegExpExec","regexpExec","fails","arrayPush","push","min","Math","MAX_UINT32","SUPPORTS_Y","RegExp","SPLIT","nativeSplit","maybeCallNative","internalSplit","split","length","separator","limit","string","String","this","lim","undefined","call","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","source","slice","index","apply","test","O","splitter","regexp","res","done","value","rx","S","C","unicodeMatching","p","q","A","e","z","i","global","ePub","name","components","mixins","mounted","console","log","fileName","err","blob","url","methods","initEpub","book","setCurrentBook","initRendition","parseBook","currentBook","ready","initFontFamily","font","rendition","themes","setDefaultFontFamily","initFontSize","fontSize","setDefaultFontSize","initGesture","on","offsetX","time","renderTo","width","window","innerWidth","height","innerHeight","method","display","location","hooks","content","register","Promise","all","initTheme","defaultTheme","themeList","setDefaultTheme","forEach","select","move","offsetY","firstOffsetY","changedTouches","clientY","setOffsetY","preventDefault","stopPropagation","moveEnd","nextPage","next","then","hideTitleAndMenu","onMaskClick","mouseState","prevPage","toggleTileAndMenu","onMouseEnd","onMouseEnter","mouseStartTime","timeStamp","onMouseMove","loaded","cover","metadata","navigation","find","item","parent","navItem","level","prev","menuVisible","setSettingVisible","setFontFamilyVisible","setMenuVisible","isObject","classof","wellKnownSymbol","MATCH","module","exports","it","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","$event","type","indexOf","_k","keyCode","key","button","staticRenderFns","component","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","join","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced"],"mappings":"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","file":"js/chunk-8d7d8abc.a1b7f4d7.js","sourcesContent":["'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n","<template>\n  <div class=\"ebook-reader\">\n    <div id=\"read\"></div>\n    <div\n      class=\"ebook-reader-mask\"\n      @click=\"onMaskClick\"\n      @touchmove=\"move\"\n      @touchend=\"moveEnd\"\n      @mousedown.left=\"onMouseEnter\"\n      @mousemove.left=\"onMouseMove\"\n      @mouseup.left=\"onMouseEnd\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport Epub from \"epubjs\";\nimport { ebookMixin } from \"../../utils/mixin\";\nimport {\n  getFontFamily,\n  getFontSize,\n  getTheme,\n  saveFontFamily,\n  saveTheme,\n  getLocation\n} from \"../../utils/localStorage\";\nimport { flatten } from \"../../utils/book\";\nimport { getLocalForage } from \"@/utils/localForage\";\n\nglobal.ePub = Epub;\n\nexport default {\n  name: \"EbookReader\",\n  components: {},\n  mixins: [ebookMixin],\n  mounted() {\n    const books = this.$route.params.fileName.split(\"|\");\n    const fileName = books[1];\n    console.log(fileName);\n    getLocalForage(fileName, (err, blob) => {\n      if (!err && blob) {\n        console.log(\"找到离线缓存电子书\");\n        this.setFileName(books.join(\"/\")).then(() => {\n          this.initEpub(blob);\n        });\n      } else {\n        console.log(\"在线获取电子书\");\n        this.setFileName(books.join(\"/\")).then(() => {\n          // const url = process.env.VUE_APP_RES_URL + '/epub/' + this.fileName + '.epub'\n          const url =\n            process.env.VUE_APP_RES_URL +\n            \"/epub/\" +\n            this.fileName +\n            \"/OEBPS/content.opf\";\n          console.log(url);\n          this.initEpub(url);\n        });\n      }\n    });\n  },\n  methods: {\n    initEpub(url) {\n      this.book = new Epub(url);\n\n      this.setCurrentBook(this.book);\n      this.initRendition();\n      // this.initGesture()\n      this.parseBook();\n      this.currentBook.ready\n        .then(() => {\n          return this.book.locations.generate(\n            750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16)\n          );\n        })\n        .then(locations => {\n          this.setBookAvailable(true);\n          this.refreshLocation();\n        });\n    },\n    initFontFamily() {\n      const font = getFontFamily(this.fileName);\n      if (!font) {\n        saveFontFamily(this.fileName, this.defaultFontFamily);\n      } else {\n        this.currentBook.rendition.themes.font(font);\n        this.setDefaultFontFamily(font);\n      }\n    },\n    initFontSize() {\n      const fontSize = getFontSize(this.fileName);\n      if (!fontSize) {\n        saveFontFamily(this.fileName, this.defaultFontFamily);\n      } else {\n        this.currentBook.rendition.themes.fontSize(fontSize);\n        this.setDefaultFontSize(fontSize);\n      }\n    },\n    initGesture() {\n      this.rendition.on(\"touchstart\", event => {\n        this.touchStartX = event.changedTouches[0].clientX;\n        this.touchStartTime = event.timeStamp;\n      });\n      this.rendition.on(\"touchend\", event => {\n        const offsetX = event.changedTouches[0].clientX - this.touchStartX;\n        const time = event.timeStamp - this.touchStartTime;\n        if (offsetX < 0 && time < 500) {\n          this.nextPage();\n        } else if (offsetX > 0 && time < 500) {\n          this.prevPage();\n        } else {\n          this.toggleTileAndMenu();\n        }\n      });\n    },\n    initRendition() {\n      this.rendition = this.book.renderTo(\"read\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        method: \"default\"\n      });\n\n      const location = getLocation(this.fileName);\n      this.display(location, () => {\n        this.initTheme();\n        this.initFontFamily();\n        this.initFontSize();\n        this.initGlobalStyle();\n      });\n      console.log(this.book);\n      this.rendition.hooks.content.register(contents => {\n        Promise.all([\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/daysone.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\n          ),\n          contents.addStylesheet(\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\n          )\n        ]).then(() => {});\n      });\n    },\n    initTheme() {\n      let defaultTheme = getTheme(this.fileName);\n      if (!defaultTheme) {\n        defaultTheme = this.themeList[0].name;\n        saveTheme(this.fileName, defaultTheme);\n      }\n      this.setDefaultTheme(getTheme(this.fileName));\n      this.themeList.forEach(theme => {\n        this.rendition.themes.register(theme.name, theme.style);\n      });\n      this.rendition.themes.select(defaultTheme);\n    },\n    move(e) {\n      if (this.offsetY <= 200) {\n        let offsetY = 0;\n        if (this.firstOffsetY) {\n          offsetY = e.changedTouches[0].clientY - this.firstOffsetY;\n          this.setOffsetY(offsetY);\n        } else {\n          this.firstOffsetY = e.changedTouches[0].clientY;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n    moveEnd(e) {\n      this.setOffsetY(0);\n      this.firstOffsetY = null;\n    },\n    nextPage() {\n      if (this.rendition) {\n        this.rendition.next().then(() => {\n          this.refreshLocation();\n        });\n        this.hideTitleAndMenu();\n      }\n    },\n    onMaskClick(e) {\n      if (this.mouseState && (this.mouseState === 2 || this.mouseState === 3)) {\n        return;\n      }\n      const offsetX = e.offsetX;\n      const width = window.innerWidth;\n      if (offsetX > 0 && offsetX < width * 0.3) {\n        this.prevPage();\n      } else if (offsetX > 0 && offsetX > width * 0.7) {\n        this.nextPage();\n      } else {\n        this.toggleTileAndMenu();\n      }\n    },\n    onMouseEnd(e) {\n      if (this.mouseState === 2) {\n        this.setOffsetY(0);\n        this.firstOffsetY = null;\n        this.mouseState = 3;\n      } else {\n        this.mouseState = 4;\n      }\n      const time = e.timeStamp - this.mouseStartTime;\n      if (time < 100) {\n        this.mouseState = 4;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    onMouseEnter(e) {\n      this.mouseState = 1;\n      this.mouseStartTime = e.timeStamp;\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    onMouseMove(e) {\n      if (this.mouseState === 1) {\n        this.mouseState = 2;\n      } else if (this.mouseState === 2) {\n        if (this.offsetY <= 200) {\n          let offsetY = 0;\n          if (this.firstOffsetY) {\n            offsetY = e.clientY - this.firstOffsetY;\n            this.setOffsetY(offsetY);\n          } else {\n            this.firstOffsetY = e.clientY;\n          }\n        }\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    parseBook() {\n      this.book.loaded.cover.then(cover => {\n        this.book.archive.createUrl(cover).then(url => {\n          this.setCover(url);\n        });\n      });\n      this.book.loaded.metadata.then(metadata => {\n        this.setMetadata(metadata);\n      });\n      this.book.loaded.navigation.then(navigation => {\n        const navItem = flatten(navigation.toc);\n\n        function find(item, level = 0) {\n          return !item.parent\n            ? level\n            : find(\n                navItem.filter(parentItem => parentItem.id === item.parent)[0],\n                ++level\n              );\n        }\n\n        navItem.forEach(item => {\n          item.level = find(item);\n        });\n\n        this.setNavigation(navItem);\n      });\n    },\n    prevPage() {\n      if (this.rendition) {\n        this.rendition.prev().then(() => {\n          this.refreshLocation();\n        });\n        this.hideTitleAndMenu();\n      }\n    },\n    toggleTileAndMenu() {\n      if (this.menuVisible) {\n        this.setSettingVisible(-1);\n        this.setFontFamilyVisible(false);\n      }\n      this.setMenuVisible(!this.menuVisible);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/styles/global\";\n\n.ebook-reader {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n\n  .ebook-reader-mask {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 150;\n    width: 100%;\n    height: 100%;\n\n    background: transparent;\n  }\n}\n</style>\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ebook-reader\"},[_c('div',{attrs:{\"id\":\"read\"}}),_c('div',{staticClass:\"ebook-reader-mask\",on:{\"click\":_vm.onMaskClick,\"touchmove\":_vm.move,\"touchend\":_vm.moveEnd,\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseEnter($event)},\"mousemove\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseMove($event)},\"mouseup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseEnd($event)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EbookReader.vue?vue&type=template&id=2c7831ea&scoped=true&\"\nimport script from \"./EbookReader.vue?vue&type=script&lang=js&\"\nexport * from \"./EbookReader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EbookReader.vue?vue&type=style&index=0&id=2c7831ea&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c7831ea\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=style&index=0&id=2c7831ea&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=style&index=0&id=2c7831ea&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n"],"sourceRoot":""}