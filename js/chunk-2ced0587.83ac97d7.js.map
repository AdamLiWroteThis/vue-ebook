{"version":3,"sources":["webpack:///./src/views/store/StoreSpeaking.vue?356d","webpack:///./src/components/speak/SpeakBottom.vue?256a","webpack:///src/components/speak/SpeakBottom.vue","webpack:///./src/components/speak/SpeakBottom.vue?1361","webpack:///./src/components/speak/SpeakBottom.vue","webpack:///./src/components/speak/SpeakMask.vue?1996","webpack:///src/components/speak/SpeakMask.vue","webpack:///./src/components/speak/SpeakMask.vue?1b72","webpack:///./src/components/speak/SpeakMask.vue","webpack:///./src/components/speak/SpeakMask.vue?7cd2","webpack:///src/views/store/StoreSpeaking.vue","webpack:///./src/components/speak/SpeakPlaying.vue?7446","webpack:///./src/components/speak/SpeakBottom.vue?b62a","webpack:///./src/components/speak/SpeakPlaying.vue?07f0","webpack:///src/components/speak/SpeakPlaying.vue","webpack:///./src/components/speak/SpeakPlaying.vue?4c13","webpack:///./src/components/speak/SpeakPlaying.vue","webpack:///./src/views/store/StoreSpeaking.vue?b0d0","webpack:///./src/views/store/StoreSpeaking.vue?684a","webpack:///./src/views/store/StoreSpeaking.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","showPlay","on","$event","stopPropagation","preventDefault","onPlayingCardClick","togglePlay","isPlaying","_v","_s","chapter","label","currentSectionIndex","currentSectionTotal","_e","playInfo","currentMinute","currentSecond","totalMinute","totalSecond","$t","staticRenderFns","props","Object","Number","Boolean","methods","$parent","$emit","component","attrs","directives","name","rawName","value","expression","hide","title","ref","domProps","progress","onProgressChange","target","onProgressInput","leftMinute","leftSecond","prev","next","String","book","section","data","visible","speakCardVisible","readHeight","refreshProgress","p","$refs","style","backgroundSize","updateText","promise","then","rendition","resetPlay","setTimeout","display","renderTo","width","window","innerWidth","height","method","displayed","href","show","refresh","$nextTick","bookWrapper","global","ePub","components","DetailTitle","BookInfo","Scroll","SpeakPlaying","Bottom","SpeakWindow","computed","m","s","audioCanPlay","lang","metadata","language","disableScroll","speakWindow","playingIndex","scrollBottom","flatNavigation","desc","description","substring","navigation","Array","prototype","concat","apply","doFlatNavigation","toc","category","bookItem","author","creator","cover","ifShowContent","paragraph","audio","currentPlayingTime","totalPlayingTime","playStatus","toastText","isOnline","createVoice","xmlhttp","open","send","xmlDoc","json","path","src","continuePlay","showToast","pausePlay","play","speak","index","spine","get","text","replace","pause","speakPlaying","stopAnimation","onAudioEnded","currentTime","percent","onTimeUpdate","onCanPlay","duration","findBookFromList","response","status","bookList","length","init","err","blob","opf","fileName","downloadBook","parseBook","loaded","coverUrl","back","$router","go","onScroll","offsetY","showShadow","hideShadow","toggleContent","content","forEach","item","deep","arr","push","subitems","simpleToast","mounted","_l","key","refInFor","number","styles","i","startAnimation","task","setInterval","clearInterval","random","Math","ceil","_m"],"mappings":"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","file":"js/chunk-2ced0587.83ac97d7.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=style&index=0&id=5f859bea&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=style&index=0&id=5f859bea&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bottom-wrapper\",class:{ 'hide-play': !_vm.showPlay }},[(_vm.showPlay)?_c('div',{staticClass:\"bottom-playing-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onPlayingCardClick($event)}}},[_c('div',{staticClass:\"bottom-playing-left\"},[_c('div',{staticClass:\"icon-play-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.togglePlay($event)}}},[(!_vm.isPlaying)?_c('span',{staticClass:\"icon-play_go\"}):_c('span',{staticClass:\"icon-play_pause\"})])]),_c('div',{staticClass:\"bottom-playing-right\"},[_c('div',{staticClass:\"bottom-playing-chapter-text\"},[_c('span',{staticClass:\"chapter-label\"},[_vm._v(_vm._s(_vm.chapter ? _vm.chapter.label : \"\"))]),(_vm.currentSectionIndex && _vm.currentSectionTotal)?_c('span',{staticClass:\"bottom-playing-page-text\"},[_vm._v(\"( \"+_vm._s(_vm.currentSectionIndex)+\" / \"+_vm._s(_vm.currentSectionTotal)+\" )\")]):_vm._e()]),_c('div',{staticClass:\"bottom-playing-page-text\"},[_vm._v(\" \"+_vm._s(_vm.playInfo ? _vm.playInfo.currentMinute : \"00\")+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.currentSecond : \"00\")+\" / \"+_vm._s(_vm.playInfo ? _vm.playInfo.totalMinute : \"00\")+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.totalSecond : \"00\")+\" \")])])]):_vm._e(),_c('div',{staticClass:\"bottom-btn-wrapper\"},[_c('span',{staticClass:\"bottom-btn-text\"},[_vm._v(_vm._s(_vm.$t(\"detail.addOrRemoveShelf\")))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bottom-wrapper\" :class=\"{ 'hide-play': !showPlay }\">\n    <div\n      class=\"bottom-playing-wrapper\"\n      @click.stop.prevent=\"onPlayingCardClick\"\n      v-if=\"showPlay\"\n    >\n      <div class=\"bottom-playing-left\">\n        <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n          <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n          <span class=\"icon-play_pause\" v-else></span>\n        </div>\n      </div>\n      <div class=\"bottom-playing-right\">\n        <div class=\"bottom-playing-chapter-text\">\n          <span class=\"chapter-label\">{{ chapter ? chapter.label : \"\" }}</span>\n          <span\n            class=\"bottom-playing-page-text\"\n            v-if=\"currentSectionIndex && currentSectionTotal\"\n            >( {{ currentSectionIndex }} / {{ currentSectionTotal }} )</span\n          >\n        </div>\n        <div class=\"bottom-playing-page-text\">\n          {{ playInfo ? playInfo.currentMinute : \"00\" }}:{{\n            playInfo ? playInfo.currentSecond : \"00\"\n          }}\n          / {{ playInfo ? playInfo.totalMinute : \"00\" }}:{{\n            playInfo ? playInfo.totalSecond : \"00\"\n          }}\n        </div>\n      </div>\n    </div>\n    <div class=\"bottom-btn-wrapper\">\n      <span class=\"bottom-btn-text\">{{ $t(\"detail.addOrRemoveShelf\") }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    chapter: Object,\n    currentSectionIndex: Number,\n    currentSectionTotal: Number,\n    showPlay: Boolean,\n    isPlaying: Boolean,\n    playInfo: Object\n  },\n  methods: {\n    togglePlay() {\n      this.$parent.togglePlay();\n    },\n    onPlayingCardClick() {\n      this.$emit(\"onPlayingCardClick\");\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"@/assets/styles/global\";\n\n.bottom-wrapper {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 110;\n  width: 100%;\n  height: px2rem(116);\n  background: white;\n  box-shadow: 0 px2rem(-2) px2rem(2) 0 rgba(0, 0, 0, 0.1);\n  &.hide-play {\n    height: px2rem(52);\n  }\n  .bottom-playing-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(64);\n    .bottom-playing-left {\n      flex: 0 0 px2rem(70);\n      width: px2rem(70);\n      @include center;\n      .icon-play-wrapper {\n        flex: 0 0 px2rem(100);\n        @include center;\n        &:active {\n          opacity: 0.5;\n        }\n        .icon-play_go {\n          font-size: px2rem(40);\n          color: $color-blue;\n        }\n        .icon-play_pause {\n          font-size: px2rem(40);\n          color: $color-blue;\n        }\n      }\n    }\n    .bottom-playing-right {\n      flex: 1;\n      padding-right: px2rem(15);\n      box-sizing: border-box;\n      @include columnLeft;\n      .bottom-playing-chapter-text {\n        max-width: px2rem(305);\n        color: #333;\n        font-size: px2rem(16);\n        line-height: px2rem(19);\n        @include ellipsis;\n      }\n      .bottom-playing-page-text {\n        color: #666;\n        font-size: px2rem(10);\n        margin-top: px2rem(5);\n      }\n    }\n  }\n  .bottom-btn-wrapper {\n    width: 100%;\n    height: px2rem(52);\n    border-top: px2rem(1) solid #eee;\n    box-sizing: border-box;\n    @include center;\n    .bottom-btn-text {\n      font-size: px2rem(14);\n      color: $color-blue;\n      font-weight: bold;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpeakBottom.vue?vue&type=template&id=43d65990&scoped=true&\"\nimport script from \"./SpeakBottom.vue?vue&type=script&lang=js&\"\nexport * from \"./SpeakBottom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpeakBottom.vue?vue&type=style&index=0&id=43d65990&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43d65990\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"book-speak-mask-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.hide($event)}}},[_c('transition',{attrs:{\"name\":\"popup-slide-up\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.speakCardVisible),expression:\"speakCardVisible\"}],staticClass:\"book-speak-mask-card-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.hide($event)}}},[_c('div',{staticClass:\"pulldown-icon-wrapper\",on:{\"click\":_vm.hide}},[_c('span',{staticClass:\"icon-pull_down\"})]),_c('div',{staticClass:\"card-title-wrapper\"},[_c('div',{staticClass:\"icon-speak-wrapper\"},[_c('span',{staticClass:\"icon-speak\"})]),_c('div',{staticClass:\"speak-title-wrapper\"},[_c('span',{staticClass:\"speak-title\"},[_vm._v(_vm._s(_vm.$t(\"speak.voice\")))])]),_c('div',{staticClass:\"read-fulltext-wrapper\"},[_c('span',{staticClass:\"read-fulltext\"},[_vm._v(_vm._s(_vm.$t(\"speak.read\")))])])]),_c('div',{staticClass:\"card-section-title-wrapper\"},[_c('div',{staticClass:\"card-section-title-text\"},[_vm._v(_vm._s(_vm.title))]),(_vm.currentSectionIndex)?_c('div',{staticClass:\"card-section-sub-title-text\"},[_vm._v(\" \"+_vm._s(_vm.currentSectionIndex)+\" / \"+_vm._s(_vm.currentSectionTotal)+\" \")]):_vm._e()]),_c('div',{staticClass:\"setting-progress\"},[_c('div',{staticClass:\"progress-wrapper\"},[_c('input',{ref:\"progress\",staticClass:\"progress\",attrs:{\"type\":\"range\",\"max\":\"100\",\"min\":\"0\",\"step\":\"1\"},domProps:{\"value\":_vm.progress},on:{\"change\":function($event){return _vm.onProgressChange($event.target.value)},\"input\":function($event){return _vm.onProgressInput($event.target.value)}}})]),_c('div',{staticClass:\"progress-text\"},[_c('div',{staticClass:\"progress-text-current\"},[_vm._v(\" \"+_vm._s(_vm.playInfo ? _vm.playInfo.currentMinute : \"00\")+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.currentSecond : \"00\")+\" \")]),_c('div',{staticClass:\"progress-text-left\"},[_vm._v(\" -\"+_vm._s(_vm.playInfo ? _vm.playInfo.leftMinute : \"00\")+\":\"+_vm._s(_vm.playInfo ? _vm.playInfo.leftSecond : \"00\")+\" \")])])]),_c('div',{staticClass:\"playing-wrapper\"},[_c('div',{staticClass:\"icon-settings-wrapper\"},[_c('span',{staticClass:\"icon-settings\"}),_c('div',{staticClass:\"settings-text\"},[_vm._v(_vm._s(_vm.$t(\"speak.settings\")))])]),_c('span',{staticClass:\"icon-play_backward\",class:{ 'not-use': _vm.currentSectionIndex <= 1 },on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.prev($event)}}}),_c('div',{staticClass:\"icon-play-wrapper\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.togglePlay($event)}}},[(!_vm.isPlaying)?_c('span',{staticClass:\"icon-play_go\"}):_c('span',{staticClass:\"icon-play_pause\"})]),_c('span',{staticClass:\"icon-play_forward\",class:{ 'not-use': _vm.currentSectionIndex >= _vm.currentSectionTotal },on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.next($event)}}}),_c('div',{staticClass:\"icon-clock-wrapper\"},[_c('span',{staticClass:\"icon-clock\"}),_c('div',{staticClass:\"clock-text\"},[_vm._v(_vm._s(_vm.$t(\"speak.timing\")))])])]),_c('div',{staticClass:\"read-apply-wrapper\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"speak.apply\"))+\" \")]),_c('div',{staticClass:\"read-title-wrapper\"},[_c('span',{staticClass:\"line\"}),_c('div',{staticClass:\"read-title-text\"},[_vm._v(_vm._s(_vm.$t(\"speak.current\")))]),_c('span',{staticClass:\"line\"})]),_c('div',{ref:\"bookWrapper\",staticClass:\"book-wrapper\"},[_c('div',{attrs:{\"id\":\"book-read\"}})])])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"fade\">\n    <div\n      class=\"book-speak-mask-wrapper\"\n      @click.stop.prevent=\"hide\"\n      v-show=\"visible\"\n    >\n      <transition name=\"popup-slide-up\">\n        <div\n          class=\"book-speak-mask-card-wrapper\"\n          v-show=\"speakCardVisible\"\n          @click.stop.prevent=\"hide\"\n        >\n          <div class=\"pulldown-icon-wrapper\" @click=\"hide\">\n            <span class=\"icon-pull_down\"></span>\n          </div>\n          <div class=\"card-title-wrapper\">\n            <div class=\"icon-speak-wrapper\">\n              <span class=\"icon-speak\"></span>\n            </div>\n            <div class=\"speak-title-wrapper\">\n              <span class=\"speak-title\">{{ $t(\"speak.voice\") }}</span>\n            </div>\n            <div class=\"read-fulltext-wrapper\">\n              <span class=\"read-fulltext\">{{ $t(\"speak.read\") }}</span>\n            </div>\n          </div>\n          <div class=\"card-section-title-wrapper\">\n            <div class=\"card-section-title-text\">{{ title }}</div>\n            <div class=\"card-section-sub-title-text\" v-if=\"currentSectionIndex\">\n              {{ currentSectionIndex }} /\n              {{ currentSectionTotal }}\n            </div>\n          </div>\n          <div class=\"setting-progress\">\n            <div class=\"progress-wrapper\">\n              <input\n                class=\"progress\"\n                type=\"range\"\n                max=\"100\"\n                min=\"0\"\n                step=\"1\"\n                @change=\"onProgressChange($event.target.value)\"\n                @input=\"onProgressInput($event.target.value)\"\n                :value=\"progress\"\n                ref=\"progress\"\n              />\n            </div>\n            <div class=\"progress-text\">\n              <div class=\"progress-text-current\">\n                {{ playInfo ? playInfo.currentMinute : \"00\" }}:{{\n                  playInfo ? playInfo.currentSecond : \"00\"\n                }}\n              </div>\n              <div class=\"progress-text-left\">\n                -{{ playInfo ? playInfo.leftMinute : \"00\" }}:{{\n                  playInfo ? playInfo.leftSecond : \"00\"\n                }}\n              </div>\n            </div>\n          </div>\n          <div class=\"playing-wrapper\">\n            <div class=\"icon-settings-wrapper\">\n              <span class=\"icon-settings\"></span>\n              <div class=\"settings-text\">{{ $t(\"speak.settings\") }}</div>\n            </div>\n            <span\n              class=\"icon-play_backward\"\n              :class=\"{ 'not-use': currentSectionIndex <= 1 }\"\n              @click.stop.prevent=\"prev\"\n            ></span>\n            <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n              <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n              <span class=\"icon-play_pause\" v-else></span>\n            </div>\n            <span\n              class=\"icon-play_forward\"\n              :class=\"{ 'not-use': currentSectionIndex >= currentSectionTotal }\"\n              @click.stop.prevent=\"next\"\n            ></span>\n            <div class=\"icon-clock-wrapper\">\n              <span class=\"icon-clock\"></span>\n              <div class=\"clock-text\">{{ $t(\"speak.timing\") }}</div>\n            </div>\n          </div>\n          <div class=\"read-apply-wrapper\">\n            {{ $t(\"speak.apply\") }}\n          </div>\n          <div class=\"read-title-wrapper\">\n            <span class=\"line\"></span>\n            <div class=\"read-title-text\">{{ $t(\"speak.current\") }}</div>\n            <span class=\"line\"></span>\n          </div>\n          <div class=\"book-wrapper\" ref=\"bookWrapper\">\n            <div id=\"book-read\"></div>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { realPx } from \"@/utils/utils\";\n\nexport default {\n  props: {\n    title: String,\n    book: Object,\n    section: Object,\n    currentSectionIndex: Number,\n    currentSectionTotal: Number,\n    isPlaying: Boolean,\n    playInfo: Object\n  },\n  data() {\n    return {\n      visible: false,\n      speakCardVisible: false,\n      progress: 0,\n      readHeight: 0\n    };\n  },\n  methods: {\n    refreshProgress(p) {\n      this.progress = p;\n      this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`;\n    },\n    updateText(promise) {\n      promise.then(() => {\n        const currentPage = this.rendition.currentLocation();\n        const cfibase = this.section.cfiBase;\n        const cfistart = currentPage.start.cfi\n          .replace(/.*!/, \"\")\n          .replace(/\\)/, \"\");\n        const cfiend = currentPage.end.cfi.replace(/.*!/, \"\").replace(/\\)/, \"\");\n        this.book\n          .getRange(`epubcfi(${cfibase}!,${cfistart},${cfiend})`)\n          .then(range => {\n            let text = range.toString();\n            text = text.replace(/\\s(2,)/g, \"\");\n            text = text.replace(/\\r/g, \"\");\n            text = text.replace(/\\n/g, \"\");\n            text = text.replace(/\\t/g, \"\");\n            text = text.replace(/\\f/g, \"\");\n            this.$emit(\"updateText\", text);\n          });\n      });\n    },\n    togglePlay() {\n      this.$parent.togglePlay();\n    },\n    prev() {\n      if (this.currentSectionIndex > 1) {\n        this.updateText(this.rendition.prev());\n        this.$emit(\"update:currentSectionIndex\", this.currentSectionIndex - 1);\n        this.$parent.resetPlay();\n        setTimeout(() => {\n          this.$parent.togglePlay();\n        }, 500);\n      }\n    },\n    next() {\n      if (this.currentSectionIndex < this.currentSectionTotal) {\n        this.updateText(this.rendition.next());\n        this.$emit(\"update:currentSectionIndex\", this.currentSectionIndex + 1);\n        this.$parent.resetPlay();\n        setTimeout(() => {\n          this.$parent.togglePlay();\n        }, 500);\n      }\n    },\n    display() {\n      if (!this.rendition) {\n        this.rendition = this.book.renderTo(\"book-read\", {\n          width: window.innerWidth > 640 ? 640 : window.innerWidth,\n          height: this.readHeight,\n          method: \"default\"\n        });\n        this.displayed = this.rendition.display(this.section.href);\n      } else {\n        this.displayed = this.rendition.display(this.section.href);\n      }\n    },\n    onProgressChange(progress) {},\n    onProgressInput(progress) {\n      this.progress = progress;\n      this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`;\n    },\n    hide() {\n      this.speakCardVisible = false;\n      this.visible = false;\n    },\n    show() {\n      this.visible = true;\n      this.speakCardVisible = true;\n      this.refresh();\n      this.$nextTick(() => {\n        this.display();\n      });\n    },\n    refresh() {\n      this.readHeight =\n        window.innerHeight * 0.9 -\n        realPx(40) -\n        realPx(54) -\n        realPx(46) -\n        realPx(48) -\n        realPx(60) -\n        realPx(44);\n      // console.log(this.readHeight)\n      this.$refs.bookWrapper.style.height = this.readHeight + \"px\";\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"@/assets/styles/global\";\n\n.book-speak-mask-wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 120;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  .book-speak-mask-card-wrapper {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    z-index: 120;\n    width: 100%;\n    height: 90%;\n    background: white;\n    border-radius: px2rem(10) px2rem(10) 0 0;\n    .pulldown-icon-wrapper {\n      width: 100%;\n      height: px2rem(40);\n      color: #ccc;\n      font-size: px2rem(40);\n      @include center;\n    }\n    .card-title-wrapper {\n      width: 100%;\n      height: px2rem(54);\n      display: flex;\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      .icon-speak-wrapper {\n        flex: 0 0 px2rem(40);\n        @include left;\n        .icon-speak {\n          font-size: px2rem(24);\n          color: #999;\n        }\n      }\n      .speak-title-wrapper {\n        flex: 1;\n        @include left;\n        .speak-title {\n          font-size: px2rem(16);\n          font-weight: bold;\n          color: #666;\n        }\n      }\n      .read-fulltext-wrapper {\n        flex: 1;\n        @include right;\n        .read-fulltext {\n          font-size: px2rem(12);\n          font-weight: bold;\n          color: $color-blue;\n          background: rgba(74, 171, 255, 0.2);\n          padding: px2rem(5) px2rem(10);\n          box-sizing: border-box;\n          border-radius: px2rem(20);\n        }\n      }\n    }\n    .card-section-title-wrapper {\n      width: 100%;\n      height: px2rem(46);\n      padding: 0 px2rem(15);\n      box-sizing: border-box;\n      @include columnCenter;\n      .card-section-title-text {\n        font-size: px2rem(16);\n        color: #333;\n        font-weight: bold;\n      }\n      .card-section-sub-title-text {\n        font-size: px2rem(12);\n        color: #666;\n        margin-top: px2rem(5);\n      }\n    }\n    .setting-progress {\n      width: 100%;\n      height: px2rem(48);\n      @include columnTop;\n      .progress-wrapper {\n        flex: 1;\n        width: 100%;\n        @include center;\n        padding: 0 px2rem(30);\n        box-sizing: border-box;\n        .progress {\n          width: 100%;\n          -webkit-appearance: none;\n          height: px2rem(2);\n          background: -webkit-linear-gradient($color-blue, $color-blue)\n              no-repeat,\n            rgba(74, 171, 255, 0.2);\n          background-size: 0 100%;\n          &:focus {\n            outline: none;\n          }\n          &::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            height: px2rem(20);\n            width: px2rem(20);\n            border-radius: 50%;\n            background: $color-blue;\n            border: none;\n            box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.15);\n          }\n        }\n      }\n      .progress-text {\n        display: flex;\n        width: 100%;\n        padding: 0 px2rem(30);\n        box-sizing: border-box;\n        .progress-text-current {\n          flex: 1;\n          text-align: left;\n          font-size: px2rem(10);\n          color: #666;\n        }\n        .progress-text-left {\n          flex: 1;\n          text-align: right;\n          font-size: px2rem(10);\n          color: #666;\n        }\n      }\n    }\n    .playing-wrapper {\n      width: 100%;\n      height: px2rem(60);\n      @include center;\n      .icon-settings-wrapper {\n        flex: 1;\n        @include columnCenter;\n        .icon-settings {\n          font-size: px2rem(18);\n          color: #666;\n        }\n        .settings-text {\n          margin-top: px2rem(5);\n          font-size: px2rem(10);\n          color: #666;\n        }\n      }\n      .icon-play_backward {\n        font-size: px2rem(30);\n        color: $color-blue;\n        &:active {\n          opacity: 0.5;\n        }\n        &.not-use {\n          color: $color-blue-transparent;\n        }\n      }\n      .icon-play-wrapper {\n        flex: 0 0 px2rem(100);\n        @include center;\n        &:active {\n          opacity: 0.5;\n        }\n        .icon-play_go {\n          font-size: px2rem(50);\n          color: $color-blue;\n        }\n        .icon-play_pause {\n          font-size: px2rem(50);\n          color: $color-blue;\n        }\n      }\n      .icon-play_forward {\n        font-size: px2rem(30);\n        color: $color-blue;\n        &:active {\n          opacity: 0.5;\n        }\n        &.not-use {\n          color: $color-blue-transparent;\n        }\n      }\n      .icon-clock-wrapper {\n        flex: 1;\n        @include columnCenter;\n        .icon-clock2 {\n          font-size: px2rem(18);\n          color: #666;\n        }\n        .clock-text {\n          margin-top: px2rem(5);\n          font-size: px2rem(10);\n          color: #666;\n        }\n      }\n    }\n    .read-apply-wrapper {\n      width: 100%;\n      height: px2rem(20);\n      font-size: px2rem(10);\n      color: $color-green;\n      @include center;\n    }\n    .read-title-wrapper {\n      width: 100%;\n      height: px2rem(24);\n      box-sizing: border-box;\n      @include center;\n      .line {\n        flex: 1;\n        border-top: px2rem(1) solid #eee;\n        height: 0;\n      }\n      .read-title-text {\n        flex: 0 0 px2rem(130);\n        font-size: px2rem(14);\n        color: #666;\n        text-align: center;\n      }\n    }\n    .book-wrapper {\n      #read {\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpeakMask.vue?vue&type=template&id=d86d2b56&scoped=true&\"\nimport script from \"./SpeakMask.vue?vue&type=script&lang=js&\"\nexport * from \"./SpeakMask.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpeakMask.vue?vue&type=style&index=0&id=d86d2b56&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d86d2b56\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=style&index=0&id=d86d2b56&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakMask.vue?vue&type=style&index=0&id=d86d2b56&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","<template>\n  <div class=\"book-speaking\">\n    <detail-title @back=\"back\" ref=\"title\"></detail-title>\n    <scroll\n      class=\"content-wrapper\"\n      :top=\"42\"\n      :bottom=\"scrollBottom\"\n      :ifNoScroll=\"disableScroll\"\n      @onScroll=\"onScroll\"\n      ref=\"scroll\"\n    >\n      <book-info\n        :cover=\"cover\"\n        :title=\"title\"\n        :author=\"author\"\n        :desc=\"desc\"\n      ></book-info>\n      <div class=\"book-speak-title-wrapper\">\n        <div class=\"icon-speak-wrapper\">\n          <span class=\"icon-speak\"></span>\n        </div>\n        <div class=\"speak-title-wrapper\">\n          <span class=\"speak-title\">{{ $t(\"speak.voice\") }}</span>\n        </div>\n        <div class=\"icon-down-wrapper\" @click=\"toggleContent\">\n          <span\n            :class=\"{ 'icon-down2': !ifShowContent, 'icon-up': ifShowContent }\"\n          ></span>\n        </div>\n      </div>\n      <div class=\"book-detail-content-wrapper\" v-show=\"ifShowContent\">\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"loading-text-wrapper\" v-if=\"!this.navigation\">\n            <span class=\"loading-text\">{{ $t(\"detail.loading\") }}</span>\n          </div>\n          <div class=\"book-detail-content-item-wrapper\">\n            <div\n              class=\"book-detail-content-item\"\n              v-for=\"(item, index) in flatNavigation\"\n              :key=\"index\"\n              @click=\"speak(item, index)\"\n            >\n              <speak-playing\n                v-if=\"playingIndex === index\"\n                :number=\"5\"\n                ref=\"speakPlaying\"\n              ></speak-playing>\n              <div\n                class=\"book-detail-content-navigation-text\"\n                :class=\"{ 'is-playing': playingIndex === index }\"\n                v-if=\"item.label\"\n              >\n                {{ item.label }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <audio\n        @canplay=\"onCanPlay\"\n        @timeupdate=\"onTimeUpdate\"\n        @ended=\"onAudioEnded\"\n        ref=\"audio\"\n      ></audio>\n    </scroll>\n    <bottom\n      :chapter=\"chapter\"\n      :currentSectionIndex=\"currentSectionIndex\"\n      :currentSectionTotal=\"currentSectionTotal\"\n      :showPlay=\"showPlay\"\n      :isPlaying.sync=\"isPlaying\"\n      :playInfo=\"playInfo\"\n      @onPlayingCardClick=\"onPlayingCardClick\"\n    ></bottom>\n    <div class=\"book-wrapper\">\n      <div id=\"read\"></div>\n    </div>\n    <speak-window\n      :title=\"this.chapter ? this.chapter.label : ''\"\n      :book=\"book\"\n      :section=\"section\"\n      :currentSectionIndex.sync=\"currentSectionIndex\"\n      :currentSectionTotal=\"currentSectionTotal\"\n      :isPlaying.sync=\"isPlaying\"\n      :playInfo=\"playInfo\"\n      @updateText=\"updateText\"\n      ref=\"speakWindow\"\n    ></speak-window>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport DetailTitle from '@/components/detail/DetaiTitle'\nimport BookInfo from '@/components/detail/BookInfo'\nimport Scroll from '@/components/common/Scroll'\nimport SpeakPlaying from '@/components/speak/SpeakPlaying'\nimport Bottom from '@/components/speak/SpeakBottom'\nimport SpeakWindow from '@/components/speak/SpeakMask'\nimport {findBook, getCategoryName} from '@/utils/store'\nimport {download, flatList} from '@/api/store'\nimport {getLocalForage} from '@/utils/localForage'\nimport {realPx} from '@/utils/utils'\nimport Epub from 'epubjs'\n\nglobal.ePub = Epub\n\nexport default {\n  components: {\n    DetailTitle,\n    BookInfo,\n    Scroll,\n    SpeakPlaying,\n    Bottom,\n    SpeakWindow\n  },\n  computed: {\n    currentMinute() {\n      const m = Math.floor(this.currentPlayingTime / 60)\n      return m < 10 ? '0' + m : m\n    },\n    currentSecond() {\n      const s = Math.floor(this.currentPlayingTime - parseInt(this.currentMinute) * 60)\n      return s < 10 ? '0' + s : s\n    },\n    totalMinute() {\n      const m = Math.floor(this.totalPlayingTime / 60)\n      return m < 10 ? '0' + m : m\n    },\n    totalSecond() {\n      const s = Math.floor(this.totalPlayingTime - parseInt(this.totalMinute) * 60)\n      return s < 10 ? '0' + s : s\n    },\n    leftMinute() {\n      const m = Math.floor((this.totalPlayingTime - this.currentPlayingTime) / 60)\n      return m < 10 ? '0' + m : m\n    },\n    leftSecond() {\n      const s = Math.floor((this.totalPlayingTime - this.currentPlayingTime) - parseInt(this.leftMinute) * 60)\n      return s < 10 ? '0' + s : s\n    },\n    playInfo() {\n      if (this.audioCanPlay) {\n        return {\n          currentMinute: this.currentMinute,\n          currentSecond: this.currentSecond,\n          totalMinute: this.totalMinute,\n          totalSecond: this.totalSecond,\n          leftMinute: this.leftMinute,\n          leftSecond: this.leftSecond\n        }\n      } else {\n        return null\n      }\n    },\n    lang() {\n      return this.metadata ? this.metadata.language : ''\n    },\n    disableScroll() {\n      if (this.$refs.speakWindow) {\n        return this.$refs.speakWindow.visible\n      } else {\n        return false\n      }\n    },\n    showPlay() {\n      return this.playingIndex >= 0\n    },\n    scrollBottom() {\n      return this.showPlay ? 116 : 52\n    },\n    chapter() {\n      return this.flatNavigation[this.playingIndex]\n    },\n    desc() {\n      if (this.description) {\n        return this.description.substring(0, 100)\n      } else {\n        return ''\n      }\n    },\n    flatNavigation() {\n      if (this.navigation) {\n        return Array.prototype.concat.apply([], Array.prototype.concat.apply([], this.doFlatNavigation(this.navigation.toc)))\n      } else {\n        return []\n      }\n    },\n    category() {\n      return this.bookItem ? getCategoryName(this.bookItem.category) : ''\n    },\n    title() {\n      return this.metadata ? this.metadata.title : ''\n    },\n    author() {\n      return this.metadata ? this.metadata.creator : ''\n    }\n  },\n  data() {\n    return {\n      bookItem: null,\n      book: null,\n      rendition: null,\n      metadata: null,\n      cover: null,\n      navigation: null,\n      description: null,\n      ifShowContent: true,\n      playingIndex: -1,\n      paragraph: null,\n      currentSectionIndex: null,\n      currentSectionTotal: null,\n      section: null,\n      isPlaying: false,\n      audio: null,\n      audioCanPlay: false,\n      currentPlayingTime: 0,\n      totalPlayingTime: 0,\n      playStatus: 0, // 0 - 未播放，1 - 播放中，2 - 暂停中\n      toastText: '',\n      isOnline: false\n    }\n  },\n  methods: {\n    createVoice(text) {\n      const xmlhttp = new XMLHttpRequest()\n      xmlhttp.open('GET', `${process.env.VUE_APP_VOICE_URL}/voice?text=${text}&lang=${this.lang.toLowerCase()}`, false)\n      xmlhttp.send()\n      const xmlDoc = xmlhttp.responseText\n      if (xmlDoc) {\n        const json = JSON.parse(xmlDoc)\n        if (json.path) {\n          this.$refs.audio.src = json.path\n          this.continuePlay()\n        } else {\n          this.showToast('播放失败，未生成链接')\n        }\n      } else {\n        this.showToast('播放失败')\n      }\n      /*\n      axios.create({\n        baseURL: process.env.VUE_APP_VOICE_URL + '/voice'\n      })({\n        method: 'get',\n        params: {\n          text: text,\n          lang: this.lang.toLowerCase()\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          if (response.data.error === 0) {\n            const downloadUrl = response.data.path\n            console.log('开始下载...%s', downloadUrl)\n            downloadMp3(downloadUrl, blob => {\n              const url = window.URL.createObjectURL(blob)\n              console.log(blob, url)\n              this.$refs.audio.src = url\n              this.continuePlay()\n            })\n          } else {\n            this.showToast(response.data.msg)\n          }\n        } else {\n          this.showToast('请求失败')\n        }\n      }).catch(err => {\n        console.log(err)\n        this.showToast('播放失败')\n      })\n      */\n    },\n    togglePlay() {\n      if (!this.isPlaying) {\n        if (this.playStatus === 0) {\n          this.play()\n        } else if (this.playStatus === 2) {\n          this.continuePlay()\n        }\n      } else {\n        this.pausePlay()\n      }\n    },\n    speak(item, index) {\n      this.resetPlay()\n      this.playingIndex = index\n      this.$nextTick(() => {\n        this.$refs.scroll.refresh()\n      })\n      if (this.chapter) {\n        this.section = this.book.spine.get(this.chapter.href)\n        this.rendition.display(this.section.href).then(section => {\n          const currentPage = this.rendition.currentLocation()\n          const cfibase = section.cfiBase\n          const cfistart = currentPage.start.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          const cfiend = currentPage.end.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          this.currentSectionIndex = currentPage.start.displayed.page\n          this.currentSectionTotal = currentPage.start.displayed.total\n          const cfi = `epubcfi(${cfibase}!,${cfistart},${cfiend})`\n          // console.log(currentPage, cfi, cfibase, cfistart, cfiend)\n          this.book.getRange(cfi).then(range => {\n            let text = range.toLocaleString()\n            text = text.replace(/\\s(2,)/g, '')\n            text = text.replace(/\\r/g, '')\n            text = text.replace(/\\n/g, '')\n            text = text.replace(/\\t/g, '')\n            text = text.replace(/\\f/g, '')\n            this.updateText(text)\n          })\n        })\n      }\n    },\n    resetPlay() {\n      if (this.playStatus === 1) {\n        this.pausePlay()\n      }\n      this.isPlaying = false\n      this.playStatus = 0\n    },\n    play() {\n      this.createVoice(this.paragraph)\n    },\n    continuePlay() {\n      this.$refs.audio.play().then(() => {\n        this.$refs.speakPlaying[0].startAnimation()\n        this.isPlaying = true\n        this.playStatus = 1\n      })\n    },\n    pausePlay() {\n      this.$refs.audio.pause()\n      this.$refs.speakPlaying[0].stopAnimation()\n      this.isPlaying = false\n      this.playStatus = 2\n    },\n    onAudioEnded() {\n      this.resetPlay()\n      this.currentPlayingTime = this.$refs.audio.currentTime\n      const percent = Math.floor((this.currentPlayingTime / this.totalPlayingTime) * 100)\n      this.$refs.speakWindow.refreshProgress(percent)\n    },\n    onTimeUpdate() {\n      this.currentPlayingTime = this.$refs.audio.currentTime\n      const percent = Math.floor((this.currentPlayingTime / this.totalPlayingTime) * 100)\n      this.$refs.speakWindow.refreshProgress(percent)\n    },\n    onCanPlay() {\n      this.audioCanPlay = true\n      this.currentPlayingTime = this.$refs.audio.currentTime\n      this.totalPlayingTime = this.$refs.audio.duration\n    },\n    findBookFromList(fileName) {\n      flatList().then(response => {\n        if (response.status === 200) {\n          const bookList = response.data.data.filter(item => item.fileName === fileName)\n          if (bookList && bookList.length > 0) {\n            this.bookItem = bookList[0]\n            this.init()\n          }\n        }\n      })\n    },\n    init() {\n      const fileName = this.$route.query.fileName\n      if (!this.bookItem) {\n        this.bookItem = findBook(fileName)\n      }\n      if (this.bookItem) {\n        getLocalForage(fileName, (err, blob) => {\n          if (err || !blob) {\n            // this.downloadBook(fileName)\n            this.isOnline = true\n            const opf = this.$route.query.opf\n            if (opf) {\n              this.parseBook(opf)\n            }\n          } else {\n            this.isOnline = false\n            this.parseBook(blob)\n          }\n        })\n      } else {\n        this.findBookFromList(fileName)\n      }\n    },\n    downloadBook(fileName) {\n      download(\n        this.bookItem,\n        () => {\n          getLocalForage(fileName, (err, blob) => {\n            if (err) {\n              return\n            }\n            this.parseBook(blob)\n          })\n        })\n    },\n    parseBook(blob) {\n      this.book = new Epub(blob)\n      this.book.loaded.metadata.then(metadata => {\n        this.metadata = metadata\n      })\n      if (this.isOnline) {\n        this.book.coverUrl().then(url => {\n          this.cover = url\n        })\n      } else {\n        this.book.loaded.cover.then(cover => {\n          this.book.archive.createUrl(cover).then(url => {\n            this.cover = url\n          })\n        })\n      }\n      this.book.loaded.navigation.then(nav => {\n        this.navigation = nav\n      })\n      this.display()\n    },\n    back() {\n      this.$router.go(-1)\n    },\n    onScroll(offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow()\n      } else {\n        this.$refs.title.hideShadow()\n      }\n    },\n    toggleContent() {\n      this.ifShowContent = !this.ifShowContent\n    },\n    display() {\n      const height = window.innerHeight * 0.9 - realPx(40) - realPx(54) - realPx(46) - realPx(48) - realPx(60) - realPx(44)\n      this.rendition = this.book.renderTo('read', {\n        width: window.innerWidth,\n        height: height,\n        method: 'default'\n      })\n      this.rendition.display()\n    },\n    doFlatNavigation(content, deep = 1) {\n      const arr = []\n      content.forEach(item => {\n        item.deep = deep\n        arr.push(item)\n        if (item.subitems && item.subitems.length > 0) {\n          arr.push(this.doFlatNavigation(item.subitems, deep + 1))\n        }\n      })\n      return arr\n    },\n    showToast(text) {\n      this.simpleToast(text)\n    },\n    onPlayingCardClick() {\n      this.$refs.speakWindow.show()\n    },\n    updateText(text) {\n      this.paragraph = text\n    }\n  },\n  mounted() {\n    this.init()\n  }\n}\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"@/assets/styles/global\";\n\n.book-speaking {\n  font-size: px2rem(16);\n  width: 100%;\n  background: white;\n\n  .content-wrapper {\n    width: 100%;\n\n    .book-speak-title-wrapper {\n      display: flex;\n      padding: px2rem(15);\n      box-sizing: border-box;\n      border-bottom: px2rem(1) solid #eee;\n\n      .icon-speak-wrapper {\n        flex: 0 0 px2rem(40);\n        @include left;\n\n        .icon-speak {\n          font-size: px2rem(24);\n          color: #999;\n        }\n      }\n\n      .speak-title-wrapper {\n        flex: 1;\n        @include left;\n\n        .speak-title {\n          font-size: px2rem(16);\n          font-weight: bold;\n          color: #666;\n        }\n      }\n\n      .icon-down-wrapper {\n        flex: 0 0 px2rem(40);\n        @include right;\n\n        .icon-up {\n          font-size: px2rem(12);\n          color: #999;\n        }\n\n        .icon-down2 {\n          font-size: px2rem(12);\n          color: #999;\n        }\n      }\n    }\n\n    .book-detail-content-wrapper {\n      width: 100%;\n      border-bottom: px2rem(1) solid #eee;\n      box-sizing: border-box;\n\n      .book-detail-content-list-wrapper {\n        padding: px2rem(10) px2rem(15);\n\n        .loading-text-wrapper {\n          width: 100%;\n\n          .loading-text {\n            font-size: px2rem(14);\n            color: #999;\n          }\n        }\n\n        .book-detail-content-item-wrapper {\n          .book-detail-content-item {\n            display: flex;\n            padding: px2rem(15) 0;\n            font-size: px2rem(14);\n            line-height: px2rem(16);\n            color: #333;\n            border-bottom: px2rem(1) solid #eee;\n\n            &:last-child {\n              border-bottom: none;\n            }\n\n            .book-detail-content-navigation-text {\n              flex: 1;\n              width: 100%;\n              @include ellipsis;\n\n              &.is-playing {\n                color: $color-blue;\n                font-weight: bold;\n                margin-left: px2rem(10);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .book-wrapper {\n    position: absolute;\n    bottom: -100%;\n    z-index: 100;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=style&index=0&id=26f7b111&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=style&index=0&id=26f7b111&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=style&index=0&id=43d65990&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakBottom.vue?vue&type=style&index=0&id=43d65990&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playing-item-wrapper\"},_vm._l((_vm.styles),function(item,index){return _c('div',{key:index,ref:\"playingItem\",refInFor:true,staticClass:\"playing-item\",style:(item)})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"playing-item-wrapper\">\n    <div\n      class=\"playing-item\"\n      :style=\"item\"\n      v-for=\"(item, index) in styles\"\n      :key=\"index\"\n      ref=\"playingItem\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport { px2rem } from \"@/utils/utils\";\n\nexport default {\n  props: {\n    number: Number\n  },\n  computed: {\n    styles() {\n      const styles = new Array(this.number);\n      for (let i = 0; i < styles.length; i++) {\n        styles[i] = {\n          height: px2rem(this.random()) + \"rem\"\n        };\n      }\n      return styles;\n    }\n  },\n  methods: {\n    startAnimation() {\n      this.task = setInterval(() => {\n        this.$refs.playingItem.forEach(item => {\n          item.style.height = px2rem(this.random()) + \"rem\";\n        });\n      }, 200);\n    },\n    stopAnimation() {\n      if (this.task) {\n        clearInterval(this.task);\n      }\n    },\n    random() {\n      return Math.ceil(Math.random() * 10);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"@/assets/styles/global\";\n\n.playing-item-wrapper {\n  @include center;\n  .playing-item {\n    flex: 0 0 px2rem(2);\n    width: px2rem(2);\n    height: px2rem(1);\n    background: $color-blue;\n    margin-left: px2rem(2);\n    transition: all 0.2s ease-in-out;\n    &:first-child {\n      margin: 0;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpeakPlaying.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpeakPlaying.vue?vue&type=template&id=26f7b111&scoped=true&\"\nimport script from \"./SpeakPlaying.vue?vue&type=script&lang=js&\"\nexport * from \"./SpeakPlaying.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpeakPlaying.vue?vue&type=style&index=0&id=26f7b111&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26f7b111\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-speaking\"},[_c('detail-title',{ref:\"title\",on:{\"back\":_vm.back}}),_c('scroll',{ref:\"scroll\",staticClass:\"content-wrapper\",attrs:{\"top\":42,\"bottom\":_vm.scrollBottom,\"ifNoScroll\":_vm.disableScroll},on:{\"onScroll\":_vm.onScroll}},[_c('book-info',{attrs:{\"cover\":_vm.cover,\"title\":_vm.title,\"author\":_vm.author,\"desc\":_vm.desc}}),_c('div',{staticClass:\"book-speak-title-wrapper\"},[_c('div',{staticClass:\"icon-speak-wrapper\"},[_c('span',{staticClass:\"icon-speak\"})]),_c('div',{staticClass:\"speak-title-wrapper\"},[_c('span',{staticClass:\"speak-title\"},[_vm._v(_vm._s(_vm.$t(\"speak.voice\")))])]),_c('div',{staticClass:\"icon-down-wrapper\",on:{\"click\":_vm.toggleContent}},[_c('span',{class:{ 'icon-down2': !_vm.ifShowContent, 'icon-up': _vm.ifShowContent }})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ifShowContent),expression:\"ifShowContent\"}],staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[(!this.navigation)?_c('div',{staticClass:\"loading-text-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.$t(\"detail.loading\")))])]):_vm._e(),_c('div',{staticClass:\"book-detail-content-item-wrapper\"},_vm._l((_vm.flatNavigation),function(item,index){return _c('div',{key:index,staticClass:\"book-detail-content-item\",on:{\"click\":function($event){return _vm.speak(item, index)}}},[(_vm.playingIndex === index)?_c('speak-playing',{ref:\"speakPlaying\",refInFor:true,attrs:{\"number\":5}}):_vm._e(),(item.label)?_c('div',{staticClass:\"book-detail-content-navigation-text\",class:{ 'is-playing': _vm.playingIndex === index }},[_vm._v(\" \"+_vm._s(item.label)+\" \")]):_vm._e()],1)}),0)])]),_c('audio',{ref:\"audio\",on:{\"canplay\":_vm.onCanPlay,\"timeupdate\":_vm.onTimeUpdate,\"ended\":_vm.onAudioEnded}})],1),_c('bottom',{attrs:{\"chapter\":_vm.chapter,\"currentSectionIndex\":_vm.currentSectionIndex,\"currentSectionTotal\":_vm.currentSectionTotal,\"showPlay\":_vm.showPlay,\"isPlaying\":_vm.isPlaying,\"playInfo\":_vm.playInfo},on:{\"update:isPlaying\":function($event){_vm.isPlaying=$event},\"update:is-playing\":function($event){_vm.isPlaying=$event},\"onPlayingCardClick\":_vm.onPlayingCardClick}}),_vm._m(0),_c('speak-window',{ref:\"speakWindow\",attrs:{\"title\":this.chapter ? this.chapter.label : '',\"book\":_vm.book,\"section\":_vm.section,\"currentSectionIndex\":_vm.currentSectionIndex,\"currentSectionTotal\":_vm.currentSectionTotal,\"isPlaying\":_vm.isPlaying,\"playInfo\":_vm.playInfo},on:{\"update:currentSectionIndex\":function($event){_vm.currentSectionIndex=$event},\"update:current-section-index\":function($event){_vm.currentSectionIndex=$event},\"update:isPlaying\":function($event){_vm.isPlaying=$event},\"update:is-playing\":function($event){_vm.isPlaying=$event},\"updateText\":_vm.updateText}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-wrapper\"},[_c('div',{attrs:{\"id\":\"read\"}})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreSpeaking.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoreSpeaking.vue?vue&type=template&id=5f859bea&scoped=true&\"\nimport script from \"./StoreSpeaking.vue?vue&type=script&lang=js&\"\nexport * from \"./StoreSpeaking.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoreSpeaking.vue?vue&type=style&index=0&id=5f859bea&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f859bea\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}